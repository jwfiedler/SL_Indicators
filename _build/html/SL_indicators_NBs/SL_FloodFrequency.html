

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2. Minor Flood Frequency and Duration &#8212; Sea Level Indicators</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'SL_indicators_NBs/SL_FloodFrequency';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="1. Regional and Local Sea Level Change" href="SL_magnitude.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">In development! Please post issues and suggestions to github.</div>
  </div>

  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/trend_map.png" class="logo__image only-light" alt="Sea Level Indicators - Home"/>
    <script>document.write(`<img src="../_static/trend_map.png" class="logo__image only-dark" alt="Sea Level Indicators - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Sea Level Indicators</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="SL_magnitude.html">1. Regional and Local Sea Level Change</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">2. Minor Flood Frequency and Duration</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/jwfiedler/SL_Indicators/main?urlpath=tree/SL_indicators_NBs/SL_FloodFrequency.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jwfiedler/SL_Indicators" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jwfiedler/SL_Indicators/edit/main/SL_indicators_NBs/SL_FloodFrequency.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jwfiedler/SL_Indicators/issues/new?title=Issue%20on%20page%20%2FSL_indicators_NBs/SL_FloodFrequency.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/SL_indicators_NBs/SL_FloodFrequency.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Minor Flood Frequency and Duration</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">2.1. Setup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-necessary-libraries">2.1.1. Import necessary libraries.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieve-the-tide-station-s-data-set-s">2.2. Retrieve the Tide Station(s) Data Set(s)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-the-datum-to-mhhw">2.2.1. Set the Datum to MHHW</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assess-station-data-quality-for-the-por-1983-2022">2.2.2. Assess Station Data Quality for the POR (1983-2022)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#identify-epoch-for-the-flood-frequency-analysis">2.2.2.1. Identify epoch for the flood frequency analysis</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adjust-the-data-from-calendar-year-to-storm-year">2.2.3. Adjust the data from calendar year to storm year</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-a-threshold">2.2.4. Assign a Threshold</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-and-plot-flood-frequency">2.3. Calculate and Plot Flood Frequency</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-frequency-counts">2.3.1. Plot Flood Frequency Counts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-duration">2.3.2. Plot Flood Duration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-the-percent-change-over-time">2.4. Calculate the percent change over time</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-map">2.5. Create a map</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#citations">2.6. Citations</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="minor-flood-frequency-and-duration">
<h1><span class="section-number">2. </span>Minor Flood Frequency and Duration<a class="headerlink" href="#minor-flood-frequency-and-duration" title="Permalink to this heading">#</a></h1>
<figure class="align-left">
<a class="reference internal image-reference" href="../_images/40c0ad9ce275e1931e93aef470ece3518634e90e907067c2e4f9fa2fb14ad025.png"><img alt="../_images/40c0ad9ce275e1931e93aef470ece3518634e90e907067c2e4f9fa2fb14ad025.png" src="../_images/40c0ad9ce275e1931e93aef470ece3518634e90e907067c2e4f9fa2fb14ad025.png" style="width: 430.5px; height: 214.5px;" /></a>
</figure>
<p>In this notebook we will plot two indicators concerning flooding at the Malakal tide gauge, after first taking a general look at the type of data we are able to plot from the UHSLC. These indicators are based on a ‘flooding’ threshold, using <a class="reference external" href="https://tidesandcurrents.noaa.gov/sltrends/faq.html">relative sea level</a>.</p>
<p>Download Files:
<a class="reference download internal" download="" href="../_downloads/e05c6c2f872e944506979d96f70def7e/SL_FloodFrequency_map.png"><span class="xref download myst">Map</span></a> |
<a class="reference download internal" download="" href="../_downloads/b6ef93868e21657ad682e9077180d8bc/SL_FloodFrequency_threshold_counts_days.png"><span class="xref download myst">Time Series Plot</span></a> |
<a class="reference download internal" download="" href="../_downloads/a91f70b39fb57e187e3f973c4f648c51/SL_FloodFrequency_percent_change.csv"><span class="xref download myst">Table</span></a></p>
<div class="myclass1-myclass2 admonition important">
<p class="admonition-title">Important</p>
<p>This file is taken from <a class="reference external" href="https://github.com/jpotemra/PCCM/blob/main/Chapter%205%3A%20Sea%20Level/Malakal_SL_FloodFrequency.ipynb">https://github.com/jpotemra/PCCM/blob/main/Chapter 5%3A Sea Level/Malakal_SL_FloodFrequency.ipynb</a> to demonstrate how it might work in a juptyer book context.
It has been adapted (a lot).</p>
</div>
<section id="setup">
<h2><span class="section-number">2.1. </span>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h2>
<p>We first need to import the necessary libraries, access the data, and make a quick plot to ensure we will be analyzing the right thing.</p>
<section id="import-necessary-libraries">
<h3><span class="section-number">2.1.1. </span>Import necessary libraries.<a class="headerlink" href="#import-necessary-libraries" title="Permalink to this heading">#</a></h3>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard libraries</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Data manipulation libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

<span class="c1"># Data retrieval libraries</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlretrieve</span>

<span class="c1"># Data analysis libraries</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">stats</span>

<span class="c1"># HTML parsing library</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="c1"># Visualization libraries</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="k">as</span> <span class="nn">cfeature</span>


<span class="c1"># Miscellaneous</span>
<span class="kn">from</span> <span class="nn">myst_nb</span> <span class="kn">import</span> <span class="n">glue</span>  <span class="c1"># used for figure numbering when exporting to LaTeX</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>Next, we’ll establish our directory for saving and reading data, and our output files.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../data&#39;</span><span class="p">)</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../output&#39;</span><span class="p">)</span>  
</pre></div>
</div>
</div>
</div>
<p>Then we’ll establish some basic plotting rules for this notebook to keep everything looking uniform.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>  <span class="c1"># Set a default figure size for the notebook</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.dpi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># Set default resolution for inline figures</span>

<span class="c1"># Set the default font size for axes labels, titles and ticks</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titlesize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># Set the font size for axes titles</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">14</span>  <span class="c1"># Set the font size for x and y labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span> <span class="c1"># Set the font size for x-axis tick labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span> <span class="c1"># Set the font size for y-axis tick labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">14</span> <span class="c1"># Set the font size for the text in the figure (can affect legend)</span>
</pre></div>
</div>
</div>
</details>
</div>
</section>
</section>
<section id="retrieve-the-tide-station-s-data-set-s">
<h2><span class="section-number">2.2. </span>Retrieve the Tide Station(s) Data Set(s)<a class="headerlink" href="#retrieve-the-tide-station-s-data-set-s" title="Permalink to this heading">#</a></h2>
<p>Next, we’ll access data from the UHSLC. The Malakala tide gauge has the UHSLC ID: 7. We will import the netcdf file into our current data directory, and take a peek at the dataset. We will also import the datums for this location.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uhslc_id</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">fname</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;h</span><span class="si">{</span><span class="n">uhslc_id</span><span class="si">:</span><span class="s1">03</span><span class="si">}</span><span class="s1">.nc&#39;</span> <span class="c1"># h for hourly, d for daily</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://uhslc.soest.hawaii.edu/data/netcdf/fast/hourly/&quot;</span> 

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">urlretrieve</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fname</span><span class="p">),</span> <span class="n">path</span><span class="p">)</span> 

    
<span class="n">rsl</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">/</span> <span class="n">fname</span><span class="p">)</span>
<span class="n">station_name</span> <span class="o">=</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;station_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">rsl</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:               (record_id: 1, time: 477345)
Coordinates:
  * time                  (time) datetime64[ns] 1969-05-18T15:00:00 ... 2023-...
  * record_id             (record_id) int16 70
Data variables:
    sea_level             (record_id, time) float32 ...
    lat                   (record_id) float32 ...
    lon                   (record_id) float32 ...
    station_name          (record_id) |S7 b&#x27;Malakal&#x27;
    station_country       (record_id) |S5 ...
    station_country_code  (record_id) float32 ...
    uhslc_id              (record_id) int16 ...
    gloss_id              (record_id) float32 ...
    ssc_id                (record_id) |S4 ...
    last_rq_date          (record_id) datetime64[ns] ...
Attributes:
    title:                  UHSLC Fast Delivery Tide Gauge Data (hourly)
    ncei_template_version:  NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0
    featureType:            timeSeries
    Conventions:            CF-1.6, ACDD-1.3
    date_created:           2023-12-07T14:34:12Z
    publisher_name:         University of Hawaii Sea Level Center (UHSLC)
    publisher_email:        philiprt@hawaii.edu, markm@soest.hawaii.edu
    publisher_url:          http://uhslc.soest.hawaii.edu
    summary:                The UHSLC assembles and distributes the Fast Deli...
    processing_level:       Fast Delivery (FD) data undergo a level 1 quality...
    acknowledgment:         The UHSLC Fast Delivery database is supported by ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-0202e481-f458-43ee-b135-d86f2fba16fe' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-0202e481-f458-43ee-b135-d86f2fba16fe' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>record_id</span>: 1</li><li><span class='xr-has-index'>time</span>: 477345</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-33109b8a-8730-4b61-8205-93e0cdd57786' class='xr-section-summary-in' type='checkbox'  checked><label for='section-33109b8a-8730-4b61-8205-93e0cdd57786' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>1969-05-18T15:00:00 ... 2023-10-...</div><input id='attrs-9cdca61b-de2f-4b85-aaea-073b142125c6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9cdca61b-de2f-4b85-aaea-073b142125c6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9c239853-6007-4641-bdff-6e20d9188df6' class='xr-var-data-in' type='checkbox'><label for='data-9c239853-6007-4641-bdff-6e20d9188df6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;1969-05-18T15:00:00.000000000&#x27;, &#x27;1969-05-18T16:00:00.028800000&#x27;,
       &#x27;1969-05-18T16:59:59.971200000&#x27;, ..., &#x27;2023-10-31T21:00:00.000000000&#x27;,
       &#x27;2023-10-31T22:00:00.028800000&#x27;, &#x27;2023-10-31T22:59:59.971200000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>70</div><input id='attrs-9d90014a-8923-4f2a-9e2f-f2f6134e2f95' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9d90014a-8923-4f2a-9e2f-f2f6134e2f95' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6a69fbdb-e0bc-4610-bf05-cee67d0dd67c' class='xr-var-data-in' type='checkbox'><label for='data-6a69fbdb-e0bc-4610-bf05-cee67d0dd67c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique identifier for each record (i.e., station and version) in the database</dd></dl></div><div class='xr-var-data'><pre>array([70], dtype=int16)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-31f03615-c258-4b21-b7f2-84bd64b33bf2' class='xr-section-summary-in' type='checkbox'  checked><label for='section-31f03615-c258-4b21-b7f2-84bd64b33bf2' class='xr-section-summary' >Data variables: <span>(10)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>sea_level</span></div><div class='xr-var-dims'>(record_id, time)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-4853acee-93d3-4456-a1fa-7843d407c686' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4853acee-93d3-4456-a1fa-7843d407c686' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-153f3654-c611-4e26-8cab-c99ae0ea7bfd' class='xr-var-data-in' type='checkbox'><label for='data-153f3654-c611-4e26-8cab-c99ae0ea7bfd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative sea level</dd><dt><span>units :</span></dt><dd>millimeters</dd><dt><span>source :</span></dt><dd>in situ tide gauge water level observations</dd><dt><span>platform :</span></dt><dd>station_name, station_country, station_country_code, uhslc_id, gloss_id, ssc_id</dd></dl></div><div class='xr-var-data'><pre>[477345 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-5153f640-c743-44f1-9d43-702855ccd430' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5153f640-c743-44f1-9d43-702855ccd430' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8075219a-ad51-445d-8cc1-6f0f66849530' class='xr-var-data-in' type='checkbox'><label for='data-8075219a-ad51-445d-8cc1-6f0f66849530' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>valid_min :</span></dt><dd>-90</dd><dt><span>valid_max :</span></dt><dd>90</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f7b30c71-8137-45d8-a9e5-a568faf592f3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f7b30c71-8137-45d8-a9e5-a568faf592f3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d81a65d7-cf11-4ba7-8d9d-41be2d04f0c0' class='xr-var-data-in' type='checkbox'><label for='data-d81a65d7-cf11-4ba7-8d9d-41be2d04f0c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>valid_min :</span></dt><dd>0</dd><dt><span>valid_max :</span></dt><dd>360</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_name</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S7</div><div class='xr-var-preview xr-preview'>b&#x27;Malakal&#x27;</div><input id='attrs-aa44ef96-c35a-44a5-ab3a-ecc7bbdd4a38' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-aa44ef96-c35a-44a5-ab3a-ecc7bbdd4a38' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-40b74daf-d22b-4053-b2fe-5b53d8212c43' class='xr-var-data-in' type='checkbox'><label for='data-40b74daf-d22b-4053-b2fe-5b53d8212c43' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station name</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;Malakal&#x27;], dtype=&#x27;|S7&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S5</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-bc620908-db50-4b9d-82c0-c4a359a0c2e5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bc620908-db50-4b9d-82c0-c4a359a0c2e5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-87edfe2d-18ea-4d84-a199-501ed293656e' class='xr-var-data-in' type='checkbox'><label for='data-87edfe2d-18ea-4d84-a199-501ed293656e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country (ISO 3166-1)</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=|S5]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country_code</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1be4420d-e1f7-46d3-bd4d-43955f704b7d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1be4420d-e1f7-46d3-bd4d-43955f704b7d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a91f8afc-e20c-49ba-aad2-ea00b1628046' class='xr-var-data-in' type='checkbox'><label for='data-a91f8afc-e20c-49ba-aad2-ea00b1628046' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country code (ISO 3166-1 numeric)</dd><dt><span>comment :</span></dt><dd>These are 3-digit country codes (e.g., 003) stored as integers.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>uhslc_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-b4aecabb-95d1-4009-94f3-b1af921c2965' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b4aecabb-95d1-4009-94f3-b1af921c2965' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-90ef7da1-e2e9-480c-8abe-08274304f17d' class='xr-var-data-in' type='checkbox'><label for='data-90ef7da1-e2e9-480c-8abe-08274304f17d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the University of Hawaii Sea Level Center (UHSLC)</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=int16]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gloss_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ff3dbdcb-f56f-4e6a-82ba-54ee8c179774' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ff3dbdcb-f56f-4e6a-82ba-54ee8c179774' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2be46513-ab24-4d08-986c-68e49ea57be7' class='xr-var-data-in' type='checkbox'><label for='data-2be46513-ab24-4d08-986c-68e49ea57be7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the WMO/IOC Global Sea Level Observing System (GLOSS)</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssc_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S4</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-0fe6dab5-8d52-4d8e-9f1c-ec5475f98cc0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0fe6dab5-8d52-4d8e-9f1c-ec5475f98cc0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6ea8bb77-2dd7-4d38-8725-0983e6175d5c' class='xr-var-data-in' type='checkbox'><label for='data-6ea8bb77-2dd7-4d38-8725-0983e6175d5c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID code in the Sealevel Station Catalog (SSC) produced by the WMO/IOC Sea Level Monitoring Facility (VLIZ)</dd><dt><span>comment :</span></dt><dd>Note that SSC IDs vary in length. The IDs are padded with space characters to produce the retangular character matrix provided here.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=|S4]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>last_rq_date</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ac298e4a-86d0-4d78-a39c-7d82102d2cbf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ac298e4a-86d0-4d78-a39c-7d82102d2cbf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c449d0f4-6b0b-4f27-b31b-9df8b753c61e' class='xr-var-data-in' type='checkbox'><label for='data-c449d0f4-6b0b-4f27-b31b-9df8b753c61e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>date of last Research Quality sea level value</dd><dt><span>comment :</span></dt><dd>Values in last_rq_date correspond to an identical value in the time vector. Dates less than or equal to last_rq_date for a given station correspond to Research Quality (RQ) data. Dates after last_rq_date correspond to Fast Delivery (FD) data. Missing values indicate no RQ data for a station.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=datetime64[ns]]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-82c67f35-e363-4401-a191-903bf4b8c041' class='xr-section-summary-in' type='checkbox'  ><label for='section-82c67f35-e363-4401-a191-903bf4b8c041' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f83dbd5d-85f6-4784-9a84-1514d5745b8f' class='xr-index-data-in' type='checkbox'/><label for='index-f83dbd5d-85f6-4784-9a84-1514d5745b8f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([       &#x27;1969-05-18 15:00:00&#x27;, &#x27;1969-05-18 16:00:00.028800&#x27;,
               &#x27;1969-05-18 16:59:59.971200&#x27;,        &#x27;1969-05-18 18:00:00&#x27;,
               &#x27;1969-05-18 19:00:00.028800&#x27;, &#x27;1969-05-18 19:59:59.971200&#x27;,
                      &#x27;1969-05-18 21:00:00&#x27;, &#x27;1969-05-18 22:00:00.028800&#x27;,
               &#x27;1969-05-18 22:59:59.971200&#x27;,        &#x27;1969-05-19 00:00:00&#x27;,
               ...
               &#x27;2023-10-31 13:59:59.971200&#x27;,        &#x27;2023-10-31 15:00:00&#x27;,
               &#x27;2023-10-31 16:00:00.028800&#x27;, &#x27;2023-10-31 16:59:59.971200&#x27;,
                      &#x27;2023-10-31 18:00:00&#x27;, &#x27;2023-10-31 19:00:00.028800&#x27;,
               &#x27;2023-10-31 19:59:59.971200&#x27;,        &#x27;2023-10-31 21:00:00&#x27;,
               &#x27;2023-10-31 22:00:00.028800&#x27;, &#x27;2023-10-31 22:59:59.971200&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=477345, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-065e57ac-c740-4c44-b2f4-35e889306cb2' class='xr-index-data-in' type='checkbox'/><label for='index-065e57ac-c740-4c44-b2f4-35e889306cb2' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([70], dtype=&#x27;int16&#x27;, name=&#x27;record_id&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-52dfe32f-c140-4133-ba6d-a412f73a0997' class='xr-section-summary-in' type='checkbox'  ><label for='section-52dfe32f-c140-4133-ba6d-a412f73a0997' class='xr-section-summary' >Attributes: <span>(11)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>UHSLC Fast Delivery Tide Gauge Data (hourly)</dd><dt><span>ncei_template_version :</span></dt><dd>NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0</dd><dt><span>featureType :</span></dt><dd>timeSeries</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>date_created :</span></dt><dd>2023-12-07T14:34:12Z</dd><dt><span>publisher_name :</span></dt><dd>University of Hawaii Sea Level Center (UHSLC)</dd><dt><span>publisher_email :</span></dt><dd>philiprt@hawaii.edu, markm@soest.hawaii.edu</dd><dt><span>publisher_url :</span></dt><dd>http://uhslc.soest.hawaii.edu</dd><dt><span>summary :</span></dt><dd>The UHSLC assembles and distributes the Fast Delivery (FD) dataset of hourly- and daily-averaged tide gauge water-level observations. Tide gauge operators, or data creators, provide FD data to UHSLC after a level 1 quality assessment (see processing_level attribute). The UHSLC provides an independent quality assessment of the time series and makes FD data available within 4-6 weeks of collection. This is a &quot;fast&quot; turnaround time compared to Research Quality (RQ) data, which are available on an annual cycle after a level 2 quality assessment. RQ data replace FD data in the data stream as the former becomes available. This file contains hybrid time series composed of RQ data when available with FD data appended to the end of each RQ series.</dd><dt><span>processing_level :</span></dt><dd>Fast Delivery (FD) data undergo a level 1 quality assessment (e.g., unit and timing evaluation, outlier detection, combination of multiple channels into a primary channel, etc.). In this file, FD data are appended to Research Quality (RQ) data that have received a level 2 quality assessment (e.g., tide gauge datum evaluation, assessment of level ties to tide gauge benchmarks, comparison with nearby stations, etc.).</dd><dt><span>acknowledgment :</span></dt><dd>The UHSLC Fast Delivery database is supported by the National Oceanic and Atmospheric Administration (NOAA) Office of Climate Observations (OCO).</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>and we’ll save a few variables that will come up later for report generation.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">station</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rsl</span><span class="o">.</span><span class="n">station_name</span><span class="o">.</span><span class="n">values</span><span class="p">)[</span><span class="mi">3</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">country</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rsl</span><span class="o">.</span><span class="n">station_country</span><span class="o">.</span><span class="n">values</span><span class="p">)[</span><span class="mi">3</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>
<span class="n">startDateTime</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rsl</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])[:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">endDateTime</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rsl</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])[:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;station&quot;</span><span class="p">,</span><span class="n">station</span><span class="p">,</span><span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">,</span><span class="n">country</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;startDateTime&quot;</span><span class="p">,</span><span class="n">startDateTime</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;endDateTime&quot;</span><span class="p">,</span><span class="n">endDateTime</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<section id="set-the-datum-to-mhhw">
<h3><span class="section-number">2.2.1. </span>Set the Datum to MHHW<a class="headerlink" href="#set-the-datum-to-mhhw" title="Permalink to this heading">#</a></h3>
<aside class="margin sidebar">
<p class="sidebar-title">A Note on Datums</p>
<p>The sea level variable in the netcdf file is sea level <strong>relative to the station datum</strong>. For more information on the data processing of this gauge, see the <a class="reference external" href="https://uhslc.soest.hawaii.edu/rqds/pacific/doc/qa007b.dmt">station metdata</a>.</p>
</aside>
<p>In this example, we will set the datum to MHHW. This can be hard coded, or we can read in the <a class="reference external" href="https://uhslc.soest.hawaii.edu/stations/?stn=007#datums">station datum information</a> from UHSLC. I’m not going to do this, because there’s no elegant way to parse the datum table at the moment as far as I can tell. It’s a simple call to the NOAA COOPS API if that’s the data source, though. Instead I have a saved datums_007.csv file that we’ll call from.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read datums_007.csv</span>
<span class="n">datumtable</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/datums_007.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

<span class="c1"># extract the given datum from the dataframe</span>
<span class="n">datumname</span> <span class="o">=</span> <span class="s1">&#39;MHHW&#39;</span>
<span class="n">datum</span> <span class="o">=</span> <span class="n">datumtable</span><span class="p">[</span><span class="n">datumtable</span><span class="p">[</span><span class="s1">&#39;Datum&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">datumname</span><span class="p">][</span><span class="s1">&#39;Value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># make sure datum is a float64</span>
<span class="n">datum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>

<span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;datum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datum</span><span class="o">*</span><span class="mi">1000</span> <span class="c1"># convert to mm</span>
<span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;sea_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;sea_level&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;datum&#39;</span><span class="p">]</span>

<span class="c1"># assign units to datum and sea level</span>
<span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;datum&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mm&#39;</span>
<span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;sea_level&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mm&#39;</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;datum&quot;</span><span class="p">,</span> <span class="n">datum</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;datumname&quot;</span><span class="p">,</span> <span class="n">datumname</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">datumtable</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Datum</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Status</td>
      <td>14-Nov-2022</td>
      <td>Processing Date</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Epoch</td>
      <td>01-Jan-1983 to 31-Dec-2001</td>
      <td>Tidal Datum Analysis Period</td>
    </tr>
    <tr>
      <th>2</th>
      <td>MHHW</td>
      <td>2.162</td>
      <td>Mean Higher-High Water (m)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MHW</td>
      <td>2.087</td>
      <td>Mean High Water (m)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>MTL</td>
      <td>1.530</td>
      <td>Mean Tide Level (m)</td>
    </tr>
    <tr>
      <th>5</th>
      <td>MSL</td>
      <td>1.532</td>
      <td>Mean Sea Level (m)</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DTL</td>
      <td>1.458</td>
      <td>Mean Diurnal Tide Level (m)</td>
    </tr>
    <tr>
      <th>7</th>
      <td>MLW</td>
      <td>0.974</td>
      <td>Mean Low Water (m)</td>
    </tr>
    <tr>
      <th>8</th>
      <td>MLLW</td>
      <td>0.753</td>
      <td>Mean Lower-Low Water (m)</td>
    </tr>
    <tr>
      <th>9</th>
      <td>STND</td>
      <td>0.000</td>
      <td>Station Datum (m)</td>
    </tr>
    <tr>
      <th>10</th>
      <td>GT</td>
      <td>1.409</td>
      <td>Great Diurnal Range (m)</td>
    </tr>
    <tr>
      <th>11</th>
      <td>MN</td>
      <td>1.114</td>
      <td>Mean Range of Tide (m)</td>
    </tr>
    <tr>
      <th>12</th>
      <td>DHQ</td>
      <td>0.075</td>
      <td>Mean Diurnal High Water Inequality (m)</td>
    </tr>
    <tr>
      <th>13</th>
      <td>DLQ</td>
      <td>0.220</td>
      <td>Mean Diurnal Low Water Inequality (m)</td>
    </tr>
    <tr>
      <th>14</th>
      <td>HWI</td>
      <td>Unavailable</td>
      <td>Greenwich High Water Interval (in hours)</td>
    </tr>
    <tr>
      <th>15</th>
      <td>LWI</td>
      <td>Unavailable</td>
      <td>Greenwich Low Water Interval (in hours)</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Maximum</td>
      <td>2.785</td>
      <td>Highest Observed Water Level (m)</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Max Date &amp; Time</td>
      <td>23-Jun-2013 22</td>
      <td>Highest Observed Water Level Date and Hour (LST)</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Minimum</td>
      <td>-0.034</td>
      <td>Lowest Observed Water Level (m)</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Min Date &amp; Time</td>
      <td>19-Jan-1992 16</td>
      <td>Lowest Observed Water Level Date and Hour (LST)</td>
    </tr>
    <tr>
      <th>20</th>
      <td>HAT</td>
      <td>2.567</td>
      <td>Highest Astronomical Tide (m)</td>
    </tr>
    <tr>
      <th>21</th>
      <td>HAT Date &amp; Time</td>
      <td>27-Aug-1988 22</td>
      <td>HAT Date and Hour (LST)</td>
    </tr>
    <tr>
      <th>22</th>
      <td>LAT</td>
      <td>0.175</td>
      <td>Lowest Astronomical Tide (m)</td>
    </tr>
    <tr>
      <th>23</th>
      <td>LAT Date &amp; Time</td>
      <td>31-Dec-1986 16</td>
      <td>LAT Date and Hour (LST)</td>
    </tr>
    <tr>
      <th>24</th>
      <td>LEV</td>
      <td>1.611</td>
      <td>Switch 1 (m)</td>
    </tr>
    <tr>
      <th>25</th>
      <td>LEVB</td>
      <td>1.529</td>
      <td>Switch 2 (m)</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</details>
</div>
</section>
<section id="assess-station-data-quality-for-the-por-1983-2022">
<h3><span class="section-number">2.2.2. </span>Assess Station Data Quality for the POR (1983-2022)<a class="headerlink" href="#assess-station-data-quality-for-the-por-1983-2022" title="Permalink to this heading">#</a></h3>
<p>To do this, we’ll plot all the sea level data to make sure our data looks correct, and then we’ll truncate the data set to the time period of record (POR).</p>
<aside class="margin sidebar">
<p class="sidebar-title">Watch the units!</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Note that the sea_level variable here is in millimeters (mm)! If we want to plot things on a centimeter (cm) scale, we have to divide by 10.</p>
</div>
</aside>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rsl</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">rsl</span><span class="o">.</span><span class="n">sea_level</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">values</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Sea Level (cm, </span><span class="si">{</span><span class="n">datumname</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span> <span class="c1">#divide by 10 to convert to cm</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Sea Level (cm, MHHW)&#39;)
</pre></div>
</div>
<img alt="../_images/f2aa67d05e4a9d84e47dcc1c1c9657f4efba709ddf8b104f9cca2b7f6e5adb4c.png" src="../_images/f2aa67d05e4a9d84e47dcc1c1c9657f4efba709ddf8b104f9cca2b7f6e5adb4c.png" />
</div>
</details>
</div>
<section id="identify-epoch-for-the-flood-frequency-analysis">
<h4><span class="section-number">2.2.2.1. </span>Identify epoch for the flood frequency analysis<a class="headerlink" href="#identify-epoch-for-the-flood-frequency-analysis" title="Permalink to this heading">#</a></h4>
<p>Now, we’ll calculate trend starting from the beginning of the tidal datum analysis period epoch to the last time processed. The  epoch information is given in the datums table.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#get epoch start time from the epoch in the datumtable</span>
<span class="n">epoch_times</span> <span class="o">=</span> <span class="n">datumtable</span><span class="p">[</span><span class="n">datumtable</span><span class="p">[</span><span class="s1">&#39;Datum&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Epoch&#39;</span><span class="p">][</span><span class="s1">&#39;Value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1">#parse epoch times into start time</span>
<span class="n">epoch_start</span> <span class="o">=</span> <span class="n">epoch_times</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">epoch_start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">epoch_start</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%b-%Y&#39;</span><span class="p">)</span>

<span class="c1"># and for now, end time the processind end time</span>
<span class="n">epoch_end</span> <span class="o">=</span> <span class="n">datumtable</span><span class="p">[</span><span class="n">datumtable</span><span class="p">[</span><span class="s1">&#39;Datum&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Status&#39;</span><span class="p">][</span><span class="s1">&#39;Value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># convert to datetime object</span>
<span class="n">epoch_end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">epoch_end</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%b-%Y&#39;</span><span class="p">)</span>

<span class="n">hourly_data</span> <span class="o">=</span> <span class="n">rsl</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="n">epoch_start</span><span class="p">,</span> <span class="n">epoch_end</span><span class="p">)))</span>
<span class="n">hourly_data</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;startEpochDateTime&quot;</span><span class="p">,</span><span class="n">epoch_start</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;endEpochDateTime&quot;</span><span class="p">,</span><span class="n">epoch_end</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>and plot the hourly time series</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">sea_level</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">values</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span> <span class="c1">#divide by 10 to convert to cm</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Sea Level (cm, </span><span class="si">{</span><span class="n">datumname</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;TS_full_fig&quot;</span><span class="p">,</span><span class="n">fig</span><span class="p">,</span><span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/a62cff3b63a956a0e1c1b4781341e98a1d89c356d1726e01ecfefefdb504ee91.png" src="../_images/a62cff3b63a956a0e1c1b4781341e98a1d89c356d1726e01ecfefefdb504ee91.png" />
</div>
</details>
</div>
<figure class="align-default" id="fig-ts-full">
<img alt="../_images/a62cff3b63a956a0e1c1b4781341e98a1d89c356d1726e01ecfefefdb504ee91.png" src="../_images/a62cff3b63a956a0e1c1b4781341e98a1d89c356d1726e01ecfefefdb504ee91.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.1 </span><span class="caption-text">Full time series at <span class="pasted-text">Malakal</span>,<span class="pasted-text">Palau</span> tide gauge for the entire record from <span class="pasted-text">1969-05-18</span> to <span class="pasted-text">2023-10-31</span>. Note that the sea level is plotted in units of cm, relative to <span class="pasted-text">MHHW</span>.</span><a class="headerlink" href="#fig-ts-full" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="adjust-the-data-from-calendar-year-to-storm-year">
<h3><span class="section-number">2.2.3. </span>Adjust the data from calendar year to storm year<a class="headerlink" href="#adjust-the-data-from-calendar-year-to-storm-year" title="Permalink to this heading">#</a></h3>
<p>Storm year goes from May-April. Need to consult with Ayesha about this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;time&#39;</span><span class="p">),</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">dayofyear</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;time&#39;</span><span class="p">),</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>    
<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;time&#39;</span><span class="p">),</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># adjust year to storm year, where the storm year starts on May 1st</span>
<span class="c1"># if the month is less than 5, subtract a year</span>
<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;time&#39;</span><span class="p">),</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">data</span> <span class="o">-</span> <span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">month</span><span class="o">.</span><span class="n">data</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># get the year_storm value for April 15, 1997</span>
<span class="n">hourly_data</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="s1">&#39;1997-04-15&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:               (record_id: 1, time: 24)
Coordinates:
  * time                  (time) datetime64[ns] 1997-04-15 ... 1997-04-15T22:...
  * record_id             (record_id) int16 70
Data variables: (12/15)
    sea_level             (record_id, time) float64 -758.0 -646.0 ... -959.0
    lat                   (record_id) float32 ...
    lon                   (record_id) float32 ...
    station_name          (record_id) |S7 b&#x27;Malakal&#x27;
    station_country       (record_id) |S5 b&#x27;Palau&#x27;
    station_country_code  (record_id) float32 ...
    ...                    ...
    last_rq_date          (record_id) datetime64[ns] ...
    datum                 float64 2.162e+03
    day                   (time) int64 105 105 105 105 105 ... 105 105 105 105
    month                 (time) int64 4 4 4 4 4 4 4 4 4 4 ... 4 4 4 4 4 4 4 4 4
    year                  (time) int64 1997 1997 1997 1997 ... 1997 1997 1997
    year_storm            (time) int64 1996 1996 1996 1996 ... 1996 1996 1996
Attributes:
    title:                  UHSLC Fast Delivery Tide Gauge Data (hourly)
    ncei_template_version:  NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0
    featureType:            timeSeries
    Conventions:            CF-1.6, ACDD-1.3
    date_created:           2023-12-07T14:34:12Z
    publisher_name:         University of Hawaii Sea Level Center (UHSLC)
    publisher_email:        philiprt@hawaii.edu, markm@soest.hawaii.edu
    publisher_url:          http://uhslc.soest.hawaii.edu
    summary:                The UHSLC assembles and distributes the Fast Deli...
    processing_level:       Fast Delivery (FD) data undergo a level 1 quality...
    acknowledgment:         The UHSLC Fast Delivery database is supported by ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-aba1a771-2634-4b89-a869-2db3bd3a18ec' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-aba1a771-2634-4b89-a869-2db3bd3a18ec' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>record_id</span>: 1</li><li><span class='xr-has-index'>time</span>: 24</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-3eea62d2-62df-45f6-8a75-9e649f69962d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-3eea62d2-62df-45f6-8a75-9e649f69962d' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>1997-04-15 ... 1997-04-15T22:59:...</div><input id='attrs-6d4f2414-3d4e-4910-acba-d05da7374093' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6d4f2414-3d4e-4910-acba-d05da7374093' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2f7b992c-6b73-463f-9bf0-b32790fc8ea8' class='xr-var-data-in' type='checkbox'><label for='data-2f7b992c-6b73-463f-9bf0-b32790fc8ea8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;1997-04-15T00:00:00.000000000&#x27;, &#x27;1997-04-15T01:00:00.028800000&#x27;,
       &#x27;1997-04-15T01:59:59.971200000&#x27;, &#x27;1997-04-15T03:00:00.000000000&#x27;,
       &#x27;1997-04-15T04:00:00.028800000&#x27;, &#x27;1997-04-15T04:59:59.971200000&#x27;,
       &#x27;1997-04-15T06:00:00.000000000&#x27;, &#x27;1997-04-15T07:00:00.028800000&#x27;,
       &#x27;1997-04-15T07:59:59.971200000&#x27;, &#x27;1997-04-15T09:00:00.000000000&#x27;,
       &#x27;1997-04-15T10:00:00.028800000&#x27;, &#x27;1997-04-15T10:59:59.971200000&#x27;,
       &#x27;1997-04-15T12:00:00.000000000&#x27;, &#x27;1997-04-15T13:00:00.028800000&#x27;,
       &#x27;1997-04-15T13:59:59.971200000&#x27;, &#x27;1997-04-15T15:00:00.000000000&#x27;,
       &#x27;1997-04-15T16:00:00.028800000&#x27;, &#x27;1997-04-15T16:59:59.971200000&#x27;,
       &#x27;1997-04-15T18:00:00.000000000&#x27;, &#x27;1997-04-15T19:00:00.028800000&#x27;,
       &#x27;1997-04-15T19:59:59.971200000&#x27;, &#x27;1997-04-15T21:00:00.000000000&#x27;,
       &#x27;1997-04-15T22:00:00.028800000&#x27;, &#x27;1997-04-15T22:59:59.971200000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>70</div><input id='attrs-ca361f23-d438-4247-bd33-1d1b180d13c4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ca361f23-d438-4247-bd33-1d1b180d13c4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e0c1dcf6-e2d2-4708-9293-9d973096f11c' class='xr-var-data-in' type='checkbox'><label for='data-e0c1dcf6-e2d2-4708-9293-9d973096f11c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique identifier for each record (i.e., station and version) in the database</dd></dl></div><div class='xr-var-data'><pre>array([70], dtype=int16)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6c0e1e5b-e2b0-41e8-8d00-c01fc4d69b0f' class='xr-section-summary-in' type='checkbox'  ><label for='section-6c0e1e5b-e2b0-41e8-8d00-c01fc4d69b0f' class='xr-section-summary' >Data variables: <span>(15)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>sea_level</span></div><div class='xr-var-dims'>(record_id, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-758.0 -646.0 ... -904.0 -959.0</div><input id='attrs-b83581a1-6723-44a7-9a72-fe957da05fd4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b83581a1-6723-44a7-9a72-fe957da05fd4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f7bf706a-8371-45f7-b4bd-78e453ad50b9' class='xr-var-data-in' type='checkbox'><label for='data-f7bf706a-8371-45f7-b4bd-78e453ad50b9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>mm</dd></dl></div><div class='xr-var-data'><pre>array([[ -758.,  -646.,  -574.,  -528.,  -516.,  -576.,  -694.,  -856.,
        -1016., -1165., -1269., -1306., -1247., -1090.,  -908.,  -733.,
         -587.,  -519.,  -528.,  -606.,  -701.,  -804.,  -904.,  -959.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-884ae137-f181-499d-b606-d39e37623296' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-884ae137-f181-499d-b606-d39e37623296' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-46d7660d-357b-4083-ba62-9c3327bc2dd7' class='xr-var-data-in' type='checkbox'><label for='data-46d7660d-357b-4083-ba62-9c3327bc2dd7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>valid_min :</span></dt><dd>-90</dd><dt><span>valid_max :</span></dt><dd>90</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a206a2fe-da28-495e-91d6-8c9f45d4ff62' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a206a2fe-da28-495e-91d6-8c9f45d4ff62' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5ba6b191-07dd-42a6-981a-2b45e8dde840' class='xr-var-data-in' type='checkbox'><label for='data-5ba6b191-07dd-42a6-981a-2b45e8dde840' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>valid_min :</span></dt><dd>0</dd><dt><span>valid_max :</span></dt><dd>360</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_name</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S7</div><div class='xr-var-preview xr-preview'>b&#x27;Malakal&#x27;</div><input id='attrs-040d55b7-a768-4463-899f-7847405fbdb9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-040d55b7-a768-4463-899f-7847405fbdb9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0d7b531f-c3ca-405f-83ef-afce08bff116' class='xr-var-data-in' type='checkbox'><label for='data-0d7b531f-c3ca-405f-83ef-afce08bff116' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station name</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;Malakal&#x27;], dtype=&#x27;|S7&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S5</div><div class='xr-var-preview xr-preview'>b&#x27;Palau&#x27;</div><input id='attrs-f023e5e9-647a-4989-a206-019fa8e40e40' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f023e5e9-647a-4989-a206-019fa8e40e40' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9c48533b-508b-4737-b7e9-07d796dc8dbb' class='xr-var-data-in' type='checkbox'><label for='data-9c48533b-508b-4737-b7e9-07d796dc8dbb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country (ISO 3166-1)</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;Palau&#x27;], dtype=&#x27;|S5&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country_code</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-d7ba4068-1063-4c60-8e16-78db6c07ff9d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d7ba4068-1063-4c60-8e16-78db6c07ff9d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-935d8f02-4903-4d73-966f-f01725f5926f' class='xr-var-data-in' type='checkbox'><label for='data-935d8f02-4903-4d73-966f-f01725f5926f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country code (ISO 3166-1 numeric)</dd><dt><span>comment :</span></dt><dd>These are 3-digit country codes (e.g., 003) stored as integers.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>uhslc_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ca20aa03-6c1d-4738-be4d-9e70a3f1fc80' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ca20aa03-6c1d-4738-be4d-9e70a3f1fc80' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fdd43080-5239-4c6c-85e8-1c8941919861' class='xr-var-data-in' type='checkbox'><label for='data-fdd43080-5239-4c6c-85e8-1c8941919861' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the University of Hawaii Sea Level Center (UHSLC)</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=int16]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gloss_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-30f23d62-ac21-4fce-be51-0d491ef34ca3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-30f23d62-ac21-4fce-be51-0d491ef34ca3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-feaacb5f-e9fa-4dc0-8ef6-446f9cd7ddf8' class='xr-var-data-in' type='checkbox'><label for='data-feaacb5f-e9fa-4dc0-8ef6-446f9cd7ddf8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the WMO/IOC Global Sea Level Observing System (GLOSS)</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssc_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S4</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ec5f7e3b-9f65-415e-8a85-3936110d694c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ec5f7e3b-9f65-415e-8a85-3936110d694c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ac3ad802-93ec-4c4a-b3c8-e1c154062aa0' class='xr-var-data-in' type='checkbox'><label for='data-ac3ad802-93ec-4c4a-b3c8-e1c154062aa0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID code in the Sealevel Station Catalog (SSC) produced by the WMO/IOC Sea Level Monitoring Facility (VLIZ)</dd><dt><span>comment :</span></dt><dd>Note that SSC IDs vary in length. The IDs are padded with space characters to produce the retangular character matrix provided here.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=|S4]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>last_rq_date</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-5d0b0768-22cc-4bc6-80b6-831be7e92abf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5d0b0768-22cc-4bc6-80b6-831be7e92abf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-77a5e557-145a-4224-aaa8-ab30289da293' class='xr-var-data-in' type='checkbox'><label for='data-77a5e557-145a-4224-aaa8-ab30289da293' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>date of last Research Quality sea level value</dd><dt><span>comment :</span></dt><dd>Values in last_rq_date correspond to an identical value in the time vector. Dates less than or equal to last_rq_date for a given station correspond to Research Quality (RQ) data. Dates after last_rq_date correspond to Fast Delivery (FD) data. Missing values indicate no RQ data for a station.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=datetime64[ns]]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>datum</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.162e+03</div><input id='attrs-1d7da98b-6131-4919-a80d-d8a7213d0464' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1d7da98b-6131-4919-a80d-d8a7213d0464' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b56e58dc-eb86-440b-878d-b1cbc5a7c56d' class='xr-var-data-in' type='checkbox'><label for='data-b56e58dc-eb86-440b-878d-b1cbc5a7c56d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>mm</dd></dl></div><div class='xr-var-data'><pre>array(2162.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>day</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>105 105 105 105 ... 105 105 105 105</div><input id='attrs-2bf6cd62-0a25-49f2-8942-c6b226ff5169' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2bf6cd62-0a25-49f2-8942-c6b226ff5169' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6f4084b9-37a5-4d1b-acb6-fa540d4abe41' class='xr-var-data-in' type='checkbox'><label for='data-6f4084b9-37a5-4d1b-acb6-fa540d4abe41' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([105, 105, 105, 105, 105, 105, 105, 105, 105, 105, 105, 105, 105,
       105, 105, 105, 105, 105, 105, 105, 105, 105, 105, 105])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>month</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>4 4 4 4 4 4 4 4 ... 4 4 4 4 4 4 4 4</div><input id='attrs-437031a4-824b-420b-b854-7659ecba2cf7' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-437031a4-824b-420b-b854-7659ecba2cf7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-60ad136f-cb04-4ba0-b4cd-668817251f8e' class='xr-var-data-in' type='checkbox'><label for='data-60ad136f-cb04-4ba0-b4cd-668817251f8e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
       4, 4])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>year</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1997 1997 1997 ... 1997 1997 1997</div><input id='attrs-63e1a9e2-355e-4c22-8fb9-3b60e1315ce5' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-63e1a9e2-355e-4c22-8fb9-3b60e1315ce5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b016bfc1-85e3-4e3a-ad47-0eaee6afbf8e' class='xr-var-data-in' type='checkbox'><label for='data-b016bfc1-85e3-4e3a-ad47-0eaee6afbf8e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997,
       1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997, 1997,
       1997, 1997])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>year_storm</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1996 1996 1996 ... 1996 1996 1996</div><input id='attrs-3615b8e5-7ef1-4ef5-a846-26fc84111f05' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3615b8e5-7ef1-4ef5-a846-26fc84111f05' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-14f9d6d3-1370-465e-bf49-7537016321ce' class='xr-var-data-in' type='checkbox'><label for='data-14f9d6d3-1370-465e-bf49-7537016321ce' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996,
       1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996, 1996,
       1996, 1996])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-471b7847-205f-448e-938f-d69e9703461c' class='xr-section-summary-in' type='checkbox'  ><label for='section-471b7847-205f-448e-938f-d69e9703461c' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-00d7ca15-2799-4461-ab02-779d6302a74a' class='xr-index-data-in' type='checkbox'/><label for='index-00d7ca15-2799-4461-ab02-779d6302a74a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([       &#x27;1997-04-15 00:00:00&#x27;, &#x27;1997-04-15 01:00:00.028800&#x27;,
               &#x27;1997-04-15 01:59:59.971200&#x27;,        &#x27;1997-04-15 03:00:00&#x27;,
               &#x27;1997-04-15 04:00:00.028800&#x27;, &#x27;1997-04-15 04:59:59.971200&#x27;,
                      &#x27;1997-04-15 06:00:00&#x27;, &#x27;1997-04-15 07:00:00.028800&#x27;,
               &#x27;1997-04-15 07:59:59.971200&#x27;,        &#x27;1997-04-15 09:00:00&#x27;,
               &#x27;1997-04-15 10:00:00.028800&#x27;, &#x27;1997-04-15 10:59:59.971200&#x27;,
                      &#x27;1997-04-15 12:00:00&#x27;, &#x27;1997-04-15 13:00:00.028800&#x27;,
               &#x27;1997-04-15 13:59:59.971200&#x27;,        &#x27;1997-04-15 15:00:00&#x27;,
               &#x27;1997-04-15 16:00:00.028800&#x27;, &#x27;1997-04-15 16:59:59.971200&#x27;,
                      &#x27;1997-04-15 18:00:00&#x27;, &#x27;1997-04-15 19:00:00.028800&#x27;,
               &#x27;1997-04-15 19:59:59.971200&#x27;,        &#x27;1997-04-15 21:00:00&#x27;,
               &#x27;1997-04-15 22:00:00.028800&#x27;, &#x27;1997-04-15 22:59:59.971200&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-dce29022-de52-4a22-90b2-f030c9be05c9' class='xr-index-data-in' type='checkbox'/><label for='index-dce29022-de52-4a22-90b2-f030c9be05c9' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([70], dtype=&#x27;int16&#x27;, name=&#x27;record_id&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-2f6aab1b-e675-4132-a109-6f2c689862b1' class='xr-section-summary-in' type='checkbox'  ><label for='section-2f6aab1b-e675-4132-a109-6f2c689862b1' class='xr-section-summary' >Attributes: <span>(11)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>UHSLC Fast Delivery Tide Gauge Data (hourly)</dd><dt><span>ncei_template_version :</span></dt><dd>NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0</dd><dt><span>featureType :</span></dt><dd>timeSeries</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>date_created :</span></dt><dd>2023-12-07T14:34:12Z</dd><dt><span>publisher_name :</span></dt><dd>University of Hawaii Sea Level Center (UHSLC)</dd><dt><span>publisher_email :</span></dt><dd>philiprt@hawaii.edu, markm@soest.hawaii.edu</dd><dt><span>publisher_url :</span></dt><dd>http://uhslc.soest.hawaii.edu</dd><dt><span>summary :</span></dt><dd>The UHSLC assembles and distributes the Fast Delivery (FD) dataset of hourly- and daily-averaged tide gauge water-level observations. Tide gauge operators, or data creators, provide FD data to UHSLC after a level 1 quality assessment (see processing_level attribute). The UHSLC provides an independent quality assessment of the time series and makes FD data available within 4-6 weeks of collection. This is a &quot;fast&quot; turnaround time compared to Research Quality (RQ) data, which are available on an annual cycle after a level 2 quality assessment. RQ data replace FD data in the data stream as the former becomes available. This file contains hybrid time series composed of RQ data when available with FD data appended to the end of each RQ series.</dd><dt><span>processing_level :</span></dt><dd>Fast Delivery (FD) data undergo a level 1 quality assessment (e.g., unit and timing evaluation, outlier detection, combination of multiple channels into a primary channel, etc.). In this file, FD data are appended to Research Quality (RQ) data that have received a level 2 quality assessment (e.g., tide gauge datum evaluation, assessment of level ties to tide gauge benchmarks, comparison with nearby stations, etc.).</dd><dt><span>acknowledgment :</span></dt><dd>The UHSLC Fast Delivery database is supported by the National Oceanic and Atmospheric Administration (NOAA) Office of Climate Observations (OCO).</dd></dl></div></li></ul></div></div></div></div>
</div>
</section>
<section id="assign-a-threshold">
<h3><span class="section-number">2.2.4. </span>Assign a Threshold<a class="headerlink" href="#assign-a-threshold" title="Permalink to this heading">#</a></h3>
<p>The threshold used here to determine a flood event is 30 cm above MHHW.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">threshold</span> <span class="o">=</span> <span class="mi">30</span> <span class="c1"># in cm</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;threshold&quot;</span><span class="p">,</span><span class="n">threshold</span><span class="p">,</span><span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">hourly_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:               (record_id: 1, time: 349489)
Coordinates:
  * time                  (time) datetime64[ns] 1983-01-01 ... 2022-11-14
  * record_id             (record_id) int16 70
Data variables: (12/15)
    sea_level             (record_id, time) float64 -251.0 -401.0 ... -373.0
    lat                   (record_id) float32 ...
    lon                   (record_id) float32 ...
    station_name          (record_id) |S7 b&#x27;Malakal&#x27;
    station_country       (record_id) |S5 b&#x27;Palau&#x27;
    station_country_code  (record_id) float32 ...
    ...                    ...
    last_rq_date          (record_id) datetime64[ns] ...
    datum                 float64 2.162e+03
    day                   (time) int64 1 1 1 1 1 1 1 ... 317 317 317 317 317 318
    month                 (time) int64 1 1 1 1 1 1 1 1 ... 11 11 11 11 11 11 11
    year                  (time) int64 1983 1983 1983 1983 ... 2022 2022 2022
    year_storm            (time) int64 1982 1982 1982 1982 ... 2022 2022 2022
Attributes:
    title:                  UHSLC Fast Delivery Tide Gauge Data (hourly)
    ncei_template_version:  NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0
    featureType:            timeSeries
    Conventions:            CF-1.6, ACDD-1.3
    date_created:           2023-12-07T14:34:12Z
    publisher_name:         University of Hawaii Sea Level Center (UHSLC)
    publisher_email:        philiprt@hawaii.edu, markm@soest.hawaii.edu
    publisher_url:          http://uhslc.soest.hawaii.edu
    summary:                The UHSLC assembles and distributes the Fast Deli...
    processing_level:       Fast Delivery (FD) data undergo a level 1 quality...
    acknowledgment:         The UHSLC Fast Delivery database is supported by ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c27f13ff-ce5b-4777-9f34-c1b71a55cd96' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c27f13ff-ce5b-4777-9f34-c1b71a55cd96' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>record_id</span>: 1</li><li><span class='xr-has-index'>time</span>: 349489</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-afd1797e-c8d1-495a-9eb8-0640ac9b314e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-afd1797e-c8d1-495a-9eb8-0640ac9b314e' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>1983-01-01 ... 2022-11-14</div><input id='attrs-220c7b77-93b1-49b1-bdae-098bf9e29e9f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-220c7b77-93b1-49b1-bdae-098bf9e29e9f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c13edcac-30a7-4f2e-930b-08c05663d6ae' class='xr-var-data-in' type='checkbox'><label for='data-c13edcac-30a7-4f2e-930b-08c05663d6ae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;1983-01-01T00:00:00.000000000&#x27;, &#x27;1983-01-01T01:00:00.028800000&#x27;,
       &#x27;1983-01-01T01:59:59.971200000&#x27;, ..., &#x27;2022-11-13T22:00:00.028800000&#x27;,
       &#x27;2022-11-13T22:59:59.971200000&#x27;, &#x27;2022-11-14T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>70</div><input id='attrs-6f649056-45b8-40e2-bcb2-7059f2042a01' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6f649056-45b8-40e2-bcb2-7059f2042a01' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6f010756-ae9a-493e-86c4-0328442a0993' class='xr-var-data-in' type='checkbox'><label for='data-6f010756-ae9a-493e-86c4-0328442a0993' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique identifier for each record (i.e., station and version) in the database</dd></dl></div><div class='xr-var-data'><pre>array([70], dtype=int16)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-60f1c59f-6a19-4629-8ac9-2259b3aae819' class='xr-section-summary-in' type='checkbox'  ><label for='section-60f1c59f-6a19-4629-8ac9-2259b3aae819' class='xr-section-summary' >Data variables: <span>(15)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>sea_level</span></div><div class='xr-var-dims'>(record_id, time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-251.0 -401.0 ... -623.0 -373.0</div><input id='attrs-b910fcad-ff63-4ffd-89fd-dc3e0f2e1251' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b910fcad-ff63-4ffd-89fd-dc3e0f2e1251' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b12e3f7a-a83e-4207-9f30-c2c24d1ad8c7' class='xr-var-data-in' type='checkbox'><label for='data-b12e3f7a-a83e-4207-9f30-c2c24d1ad8c7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>mm</dd></dl></div><div class='xr-var-data'><pre>array([[-251., -401., -650., ..., -895., -623., -373.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c96645b4-70e9-4e3f-ab67-1c575c8e1dfc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c96645b4-70e9-4e3f-ab67-1c575c8e1dfc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ac846830-9688-4bc7-bd5c-20d1f9fa2457' class='xr-var-data-in' type='checkbox'><label for='data-ac846830-9688-4bc7-bd5c-20d1f9fa2457' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>valid_min :</span></dt><dd>-90</dd><dt><span>valid_max :</span></dt><dd>90</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ac63c633-dbb7-41be-a110-58949638ff6f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ac63c633-dbb7-41be-a110-58949638ff6f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e345f80d-898e-4121-a4f4-9b3ac747db1c' class='xr-var-data-in' type='checkbox'><label for='data-e345f80d-898e-4121-a4f4-9b3ac747db1c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>valid_min :</span></dt><dd>0</dd><dt><span>valid_max :</span></dt><dd>360</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_name</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S7</div><div class='xr-var-preview xr-preview'>b&#x27;Malakal&#x27;</div><input id='attrs-74363702-3d0c-40f0-af22-9bfd5c16fa42' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-74363702-3d0c-40f0-af22-9bfd5c16fa42' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-756747a3-d9da-477c-b225-3022609fb83b' class='xr-var-data-in' type='checkbox'><label for='data-756747a3-d9da-477c-b225-3022609fb83b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station name</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;Malakal&#x27;], dtype=&#x27;|S7&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S5</div><div class='xr-var-preview xr-preview'>b&#x27;Palau&#x27;</div><input id='attrs-5d51bde3-aa28-41b0-b7a3-c66ad03acd78' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5d51bde3-aa28-41b0-b7a3-c66ad03acd78' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d28e179c-20f2-4501-8c98-7826603a6a9e' class='xr-var-data-in' type='checkbox'><label for='data-d28e179c-20f2-4501-8c98-7826603a6a9e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country (ISO 3166-1)</dd></dl></div><div class='xr-var-data'><pre>array([b&#x27;Palau&#x27;], dtype=&#x27;|S5&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country_code</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-45bd7d52-cef6-4c1d-8d43-fc30559e1369' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-45bd7d52-cef6-4c1d-8d43-fc30559e1369' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4b19048c-df0d-446c-b0b9-e1a2f0c441b7' class='xr-var-data-in' type='checkbox'><label for='data-4b19048c-df0d-446c-b0b9-e1a2f0c441b7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country code (ISO 3166-1 numeric)</dd><dt><span>comment :</span></dt><dd>These are 3-digit country codes (e.g., 003) stored as integers.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>uhslc_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1ba64efb-88b7-43ce-b038-0eaf647191fe' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1ba64efb-88b7-43ce-b038-0eaf647191fe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4622c70c-ba3e-404e-b463-ff3ddef1dcda' class='xr-var-data-in' type='checkbox'><label for='data-4622c70c-ba3e-404e-b463-ff3ddef1dcda' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the University of Hawaii Sea Level Center (UHSLC)</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=int16]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gloss_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-a7dba3cf-0fb2-4480-ad9b-459fb794d7a0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a7dba3cf-0fb2-4480-ad9b-459fb794d7a0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8273750f-ddfb-409f-8a50-ea9553e4cffa' class='xr-var-data-in' type='checkbox'><label for='data-8273750f-ddfb-409f-8a50-ea9553e4cffa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the WMO/IOC Global Sea Level Observing System (GLOSS)</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssc_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>|S4</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f1f97c0a-97e5-4811-af50-8b5a2053dad5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f1f97c0a-97e5-4811-af50-8b5a2053dad5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c5fa050d-ffba-4d49-96ab-0c7bc8003229' class='xr-var-data-in' type='checkbox'><label for='data-c5fa050d-ffba-4d49-96ab-0c7bc8003229' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID code in the Sealevel Station Catalog (SSC) produced by the WMO/IOC Sea Level Monitoring Facility (VLIZ)</dd><dt><span>comment :</span></dt><dd>Note that SSC IDs vary in length. The IDs are padded with space characters to produce the retangular character matrix provided here.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=|S4]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>last_rq_date</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-7c8a8b78-47ae-475b-bc10-acbed48461fb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7c8a8b78-47ae-475b-bc10-acbed48461fb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-006de089-3f99-46ff-926a-9c72d6700280' class='xr-var-data-in' type='checkbox'><label for='data-006de089-3f99-46ff-926a-9c72d6700280' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>date of last Research Quality sea level value</dd><dt><span>comment :</span></dt><dd>Values in last_rq_date correspond to an identical value in the time vector. Dates less than or equal to last_rq_date for a given station correspond to Research Quality (RQ) data. Dates after last_rq_date correspond to Fast Delivery (FD) data. Missing values indicate no RQ data for a station.</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=datetime64[ns]]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>datum</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.162e+03</div><input id='attrs-cd807938-f257-4025-b5d9-20d01da46983' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cd807938-f257-4025-b5d9-20d01da46983' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-495fe6f5-4221-464b-80f2-64a883c3edb0' class='xr-var-data-in' type='checkbox'><label for='data-495fe6f5-4221-464b-80f2-64a883c3edb0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>mm</dd></dl></div><div class='xr-var-data'><pre>array(2162.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>day</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 1 1 1 1 ... 317 317 317 317 318</div><input id='attrs-c72689ac-8bfc-4073-95e0-2313b3340cd1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c72689ac-8bfc-4073-95e0-2313b3340cd1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c1abeb82-a095-4a8d-89b8-8a1e8633d715' class='xr-var-data-in' type='checkbox'><label for='data-c1abeb82-a095-4a8d-89b8-8a1e8633d715' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  1,   1,   1, ..., 317, 317, 318])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>month</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 1 1 1 1 1 ... 11 11 11 11 11 11</div><input id='attrs-a07b620b-75ff-4634-af6c-c0b10d8bfb9b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a07b620b-75ff-4634-af6c-c0b10d8bfb9b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-733000e3-752f-4c75-9256-0e3397ee25d6' class='xr-var-data-in' type='checkbox'><label for='data-733000e3-752f-4c75-9256-0e3397ee25d6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 1,  1,  1, ..., 11, 11, 11])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>year</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1983 1983 1983 ... 2022 2022 2022</div><input id='attrs-de5f935f-a8d1-4b93-9ae8-e4b7c7993678' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-de5f935f-a8d1-4b93-9ae8-e4b7c7993678' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f49e0cae-aefa-49e9-842b-63ee0897ffb4' class='xr-var-data-in' type='checkbox'><label for='data-f49e0cae-aefa-49e9-842b-63ee0897ffb4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1983, 1983, 1983, ..., 2022, 2022, 2022])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>year_storm</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1982 1982 1982 ... 2022 2022 2022</div><input id='attrs-a35c86bf-8151-4130-948d-09982e45e883' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a35c86bf-8151-4130-948d-09982e45e883' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b431409f-0986-4ae4-93a2-8229c3ef2e18' class='xr-var-data-in' type='checkbox'><label for='data-b431409f-0986-4ae4-93a2-8229c3ef2e18' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1982, 1982, 1982, ..., 2022, 2022, 2022])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-183da11a-6e65-49b8-8ec4-a99343b25a78' class='xr-section-summary-in' type='checkbox'  ><label for='section-183da11a-6e65-49b8-8ec4-a99343b25a78' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-7e9b01b9-a81e-404b-95a6-886af275b505' class='xr-index-data-in' type='checkbox'/><label for='index-7e9b01b9-a81e-404b-95a6-886af275b505' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([       &#x27;1983-01-01 00:00:00&#x27;, &#x27;1983-01-01 01:00:00.028800&#x27;,
               &#x27;1983-01-01 01:59:59.971200&#x27;,        &#x27;1983-01-01 03:00:00&#x27;,
               &#x27;1983-01-01 04:00:00.028800&#x27;, &#x27;1983-01-01 04:59:59.971200&#x27;,
                      &#x27;1983-01-01 06:00:00&#x27;, &#x27;1983-01-01 07:00:00.028800&#x27;,
               &#x27;1983-01-01 07:59:59.971200&#x27;,        &#x27;1983-01-01 09:00:00&#x27;,
               ...
                      &#x27;2022-11-13 15:00:00&#x27;, &#x27;2022-11-13 16:00:00.028800&#x27;,
               &#x27;2022-11-13 16:59:59.971200&#x27;,        &#x27;2022-11-13 18:00:00&#x27;,
               &#x27;2022-11-13 19:00:00.028800&#x27;, &#x27;2022-11-13 19:59:59.971200&#x27;,
                      &#x27;2022-11-13 21:00:00&#x27;, &#x27;2022-11-13 22:00:00.028800&#x27;,
               &#x27;2022-11-13 22:59:59.971200&#x27;,        &#x27;2022-11-14 00:00:00&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=349489, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-5827ab37-29a7-4046-8768-c9fb585ea074' class='xr-index-data-in' type='checkbox'/><label for='index-5827ab37-29a7-4046-8768-c9fb585ea074' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([70], dtype=&#x27;int16&#x27;, name=&#x27;record_id&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bcb9ddaf-0408-481b-8da7-f63cafbbd679' class='xr-section-summary-in' type='checkbox'  ><label for='section-bcb9ddaf-0408-481b-8da7-f63cafbbd679' class='xr-section-summary' >Attributes: <span>(11)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>UHSLC Fast Delivery Tide Gauge Data (hourly)</dd><dt><span>ncei_template_version :</span></dt><dd>NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0</dd><dt><span>featureType :</span></dt><dd>timeSeries</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>date_created :</span></dt><dd>2023-12-07T14:34:12Z</dd><dt><span>publisher_name :</span></dt><dd>University of Hawaii Sea Level Center (UHSLC)</dd><dt><span>publisher_email :</span></dt><dd>philiprt@hawaii.edu, markm@soest.hawaii.edu</dd><dt><span>publisher_url :</span></dt><dd>http://uhslc.soest.hawaii.edu</dd><dt><span>summary :</span></dt><dd>The UHSLC assembles and distributes the Fast Delivery (FD) dataset of hourly- and daily-averaged tide gauge water-level observations. Tide gauge operators, or data creators, provide FD data to UHSLC after a level 1 quality assessment (see processing_level attribute). The UHSLC provides an independent quality assessment of the time series and makes FD data available within 4-6 weeks of collection. This is a &quot;fast&quot; turnaround time compared to Research Quality (RQ) data, which are available on an annual cycle after a level 2 quality assessment. RQ data replace FD data in the data stream as the former becomes available. This file contains hybrid time series composed of RQ data when available with FD data appended to the end of each RQ series.</dd><dt><span>processing_level :</span></dt><dd>Fast Delivery (FD) data undergo a level 1 quality assessment (e.g., unit and timing evaluation, outlier detection, combination of multiple channels into a primary channel, etc.). In this file, FD data are appended to Research Quality (RQ) data that have received a level 2 quality assessment (e.g., tide gauge datum evaluation, assessment of level ties to tide gauge benchmarks, comparison with nearby stations, etc.).</dd><dt><span>acknowledgment :</span></dt><dd>The UHSLC Fast Delivery database is supported by the National Oceanic and Atmospheric Administration (NOAA) Office of Climate Observations (OCO).</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming year_storm is created from the &#39;time&#39; column</span>
<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>
<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="calculate-and-plot-flood-frequency">
<h2><span class="section-number">2.3. </span>Calculate and Plot Flood Frequency<a class="headerlink" href="#calculate-and-plot-flood-frequency" title="Permalink to this heading">#</a></h2>
<p>To analyze flood frequency, we will look for daily maximum sea levels for each day in our dataset, following <span id="id1">Thompson <em>et al.</em> [<a class="reference internal" href="#id4" title="Philip R. Thompson, Matthew J. Widlansky, Mark A. Merrifield, Janet M. Becker, and John J. Marra. A Statistical Model for Frequency of Coastal Flooding in Honolulu, Hawaii, During the 21st Century. Journal of Geophysical Research: Oceans, 124(4):2787–2802, 2019. URL: https://onlinelibrary.wiley.com/doi/abs/10.1029/2018JC014741, doi:10.1029/2018JC014741.">TWM+19</a>]</span> and others. Then, we can group our data by year and month to visualize temporal patterns in daily SWL exceedance.</p>
<figure class="margin align-default" id="fig-histogram">
<img alt="../_images/2c43589e547b8c820dc9de85ac47bdb21d21de99b36adf686e75b3572c1e6c37.png" src="../_images/2c43589e547b8c820dc9de85ac47bdb21d21de99b36adf686e75b3572c1e6c37.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Histogram of daily maximum water levels at <span class="pasted-text">Malakal</span>,<span class="pasted-text">Palau</span> tide gauge for the entire record from <span class="pasted-text">1983-01-01</span> to <span class="pasted-text">2022-11-14</span>, relative to . The dashed red line indicates the chosen threshold of <span class="pasted-text">30</span> cm.</span><a class="headerlink" href="#fig-histogram" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>Note this next code block takes a bit of time. Patience!</p>
</aside>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Resample the hourly data to daily maximum sea level</span>
<span class="n">SL_daily_max</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">SL_daily_max</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:               (time: 14563, record_id: 1)
Coordinates:
  * record_id             (record_id) int16 70
  * time                  (time) datetime64[ns] 1983-01-01 ... 2022-11-14
Data variables: (12/15)
    sea_level             (time, record_id) float64 -23.0 -109.0 ... 1.0 -373.0
    lat                   (time, record_id) float32 7.33 7.33 7.33 ... 7.33 7.33
    lon                   (time, record_id) float32 134.5 134.5 ... 134.5 134.5
    station_name          (time, record_id) |S7 b&#x27;Malakal&#x27; ... b&#x27;Malakal&#x27;
    station_country       (time, record_id) |S5 b&#x27;Palau&#x27; b&#x27;Palau&#x27; ... b&#x27;Palau&#x27;
    station_country_code  (time, record_id) float32 585.0 585.0 ... 585.0 585.0
    ...                    ...
    last_rq_date          (time, record_id) datetime64[ns] 2018-12-31T22:59:5...
    datum                 (time) float64 2.162e+03 2.162e+03 ... 2.162e+03
    day                   (time) int64 1 2 3 4 5 6 7 ... 313 314 315 316 317 318
    month                 (time) int64 1 1 1 1 1 1 1 1 ... 11 11 11 11 11 11 11
    year                  (time) int64 1983 1983 1983 1983 ... 2022 2022 2022
    year_storm            (time) int64 1983 1983 1983 1983 ... 2022 2022 2022
Attributes:
    title:                  UHSLC Fast Delivery Tide Gauge Data (hourly)
    ncei_template_version:  NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0
    featureType:            timeSeries
    Conventions:            CF-1.6, ACDD-1.3
    date_created:           2023-12-07T14:34:12Z
    publisher_name:         University of Hawaii Sea Level Center (UHSLC)
    publisher_email:        philiprt@hawaii.edu, markm@soest.hawaii.edu
    publisher_url:          http://uhslc.soest.hawaii.edu
    summary:                The UHSLC assembles and distributes the Fast Deli...
    processing_level:       Fast Delivery (FD) data undergo a level 1 quality...
    acknowledgment:         The UHSLC Fast Delivery database is supported by ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-78718fb6-b91d-4f56-94de-0c4ee44b7ada' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-78718fb6-b91d-4f56-94de-0c4ee44b7ada' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 14563</li><li><span class='xr-has-index'>record_id</span>: 1</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-774403ca-38a2-4ef8-881d-a3118b12b936' class='xr-section-summary-in' type='checkbox'  checked><label for='section-774403ca-38a2-4ef8-881d-a3118b12b936' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>record_id</span></div><div class='xr-var-dims'>(record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>70</div><input id='attrs-da52a52d-f85f-48f6-9001-38f04151f548' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-da52a52d-f85f-48f6-9001-38f04151f548' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c78286cf-da96-4989-9ebd-547f4a8e3d4e' class='xr-var-data-in' type='checkbox'><label for='data-c78286cf-da96-4989-9ebd-547f4a8e3d4e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique identifier for each record (i.e., station and version) in the database</dd></dl></div><div class='xr-var-data'><pre>array([70], dtype=int16)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>1983-01-01 ... 2022-11-14</div><input id='attrs-0a6d9755-9ab7-44e5-b2b1-97dfa7934220' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0a6d9755-9ab7-44e5-b2b1-97dfa7934220' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4296222e-576b-45c4-903e-c72909292b7d' class='xr-var-data-in' type='checkbox'><label for='data-4296222e-576b-45c4-903e-c72909292b7d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;1983-01-01T00:00:00.000000000&#x27;, &#x27;1983-01-02T00:00:00.000000000&#x27;,
       &#x27;1983-01-03T00:00:00.000000000&#x27;, ..., &#x27;2022-11-12T00:00:00.000000000&#x27;,
       &#x27;2022-11-13T00:00:00.000000000&#x27;, &#x27;2022-11-14T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-95b7c029-8238-4e77-a839-1fafb3a7c7e7' class='xr-section-summary-in' type='checkbox'  ><label for='section-95b7c029-8238-4e77-a839-1fafb3a7c7e7' class='xr-section-summary' >Data variables: <span>(15)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>sea_level</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-23.0 -109.0 -269.0 ... 1.0 -373.0</div><input id='attrs-97b30fc5-7bf2-4f9a-a0ba-1c4e046af320' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-97b30fc5-7bf2-4f9a-a0ba-1c4e046af320' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-514184b4-6705-495f-9eaf-d67e57bf12de' class='xr-var-data-in' type='checkbox'><label for='data-514184b4-6705-495f-9eaf-d67e57bf12de' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>mm</dd></dl></div><div class='xr-var-data'><pre>array([[ -23.],
       [-109.],
       [-269.],
       ...,
       [  57.],
       [   1.],
       [-373.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>7.33 7.33 7.33 ... 7.33 7.33 7.33</div><input id='attrs-f570d7d4-eb3c-434a-b997-34ead2ae08e3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f570d7d4-eb3c-434a-b997-34ead2ae08e3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-87ade530-5790-4193-9483-32f722de6ced' class='xr-var-data-in' type='checkbox'><label for='data-87ade530-5790-4193-9483-32f722de6ced' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>valid_min :</span></dt><dd>-90</dd><dt><span>valid_max :</span></dt><dd>90</dd></dl></div><div class='xr-var-data'><pre>array([[7.33],
       [7.33],
       [7.33],
       ...,
       [7.33],
       [7.33],
       [7.33]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>134.5 134.5 134.5 ... 134.5 134.5</div><input id='attrs-632965fc-eff2-4482-903c-dc05d263a33f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-632965fc-eff2-4482-903c-dc05d263a33f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c496a56e-9da9-4266-b7eb-84a94761d866' class='xr-var-data-in' type='checkbox'><label for='data-c496a56e-9da9-4266-b7eb-84a94761d866' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>valid_min :</span></dt><dd>0</dd><dt><span>valid_max :</span></dt><dd>360</dd></dl></div><div class='xr-var-data'><pre>array([[134.463],
       [134.463],
       [134.463],
       ...,
       [134.463],
       [134.463],
       [134.463]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_name</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>|S7</div><div class='xr-var-preview xr-preview'>b&#x27;Malakal&#x27; ... b&#x27;Malakal&#x27;</div><input id='attrs-34634b98-f69f-491b-991b-a17bb17d842f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-34634b98-f69f-491b-991b-a17bb17d842f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f5dec3b6-37b3-45fc-b3ce-35adbd366a3c' class='xr-var-data-in' type='checkbox'><label for='data-f5dec3b6-37b3-45fc-b3ce-35adbd366a3c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station name</dd></dl></div><div class='xr-var-data'><pre>array([[b&#x27;Malakal&#x27;],
       [b&#x27;Malakal&#x27;],
       [b&#x27;Malakal&#x27;],
       ...,
       [b&#x27;Malakal&#x27;],
       [b&#x27;Malakal&#x27;],
       [b&#x27;Malakal&#x27;]], dtype=&#x27;|S7&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>|S5</div><div class='xr-var-preview xr-preview'>b&#x27;Palau&#x27; b&#x27;Palau&#x27; ... b&#x27;Palau&#x27;</div><input id='attrs-c24245bd-7886-4f6a-99cc-ca60fd370983' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c24245bd-7886-4f6a-99cc-ca60fd370983' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a77018e8-5595-41cd-8266-3e1645fa146e' class='xr-var-data-in' type='checkbox'><label for='data-a77018e8-5595-41cd-8266-3e1645fa146e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country (ISO 3166-1)</dd></dl></div><div class='xr-var-data'><pre>array([[b&#x27;Palau&#x27;],
       [b&#x27;Palau&#x27;],
       [b&#x27;Palau&#x27;],
       ...,
       [b&#x27;Palau&#x27;],
       [b&#x27;Palau&#x27;],
       [b&#x27;Palau&#x27;]], dtype=&#x27;|S5&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>station_country_code</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>585.0 585.0 585.0 ... 585.0 585.0</div><input id='attrs-a28e0798-adf2-4888-bfc0-3d77a7dd06ec' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a28e0798-adf2-4888-bfc0-3d77a7dd06ec' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ca38f7d5-0c3f-4a03-bc68-5cb9cf236f31' class='xr-var-data-in' type='checkbox'><label for='data-ca38f7d5-0c3f-4a03-bc68-5cb9cf236f31' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>station country code (ISO 3166-1 numeric)</dd><dt><span>comment :</span></dt><dd>These are 3-digit country codes (e.g., 003) stored as integers.</dd></dl></div><div class='xr-var-data'><pre>array([[585.],
       [585.],
       [585.],
       ...,
       [585.],
       [585.],
       [585.]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>uhslc_id</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>int16</div><div class='xr-var-preview xr-preview'>7 7 7 7 7 7 7 7 ... 7 7 7 7 7 7 7 7</div><input id='attrs-c617dc24-7067-4857-aeb6-768c932aa805' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c617dc24-7067-4857-aeb6-768c932aa805' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ef8fca52-632d-4a0a-8d71-cf916b4d5800' class='xr-var-data-in' type='checkbox'><label for='data-ef8fca52-632d-4a0a-8d71-cf916b4d5800' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the University of Hawaii Sea Level Center (UHSLC)</dd></dl></div><div class='xr-var-data'><pre>array([[7],
       [7],
       [7],
       ...,
       [7],
       [7],
       [7]], dtype=int16)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gloss_id</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>120.0 120.0 120.0 ... 120.0 120.0</div><input id='attrs-049cfabe-fc27-462c-8b2a-246693c2922e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-049cfabe-fc27-462c-8b2a-246693c2922e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-11c056c2-f574-4b0b-b817-e7f41fd51a35' class='xr-var-data-in' type='checkbox'><label for='data-11c056c2-f574-4b0b-b817-e7f41fd51a35' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID number used by the WMO/IOC Global Sea Level Observing System (GLOSS)</dd></dl></div><div class='xr-var-data'><pre>array([[120.],
       [120.],
       [120.],
       ...,
       [120.],
       [120.],
       [120.]], dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ssc_id</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>|S4</div><div class='xr-var-preview xr-preview'>b&#x27;mala&#x27; b&#x27;mala&#x27; ... b&#x27;mala&#x27; b&#x27;mala&#x27;</div><input id='attrs-9aa6db08-5d6e-4501-89a1-4738d04a7d22' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9aa6db08-5d6e-4501-89a1-4738d04a7d22' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e953b764-a788-46dc-80b2-c077d5b52a6c' class='xr-var-data-in' type='checkbox'><label for='data-e953b764-a788-46dc-80b2-c077d5b52a6c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>unique station ID code in the Sealevel Station Catalog (SSC) produced by the WMO/IOC Sea Level Monitoring Facility (VLIZ)</dd><dt><span>comment :</span></dt><dd>Note that SSC IDs vary in length. The IDs are padded with space characters to produce the retangular character matrix provided here.</dd></dl></div><div class='xr-var-data'><pre>array([[b&#x27;mala&#x27;],
       [b&#x27;mala&#x27;],
       [b&#x27;mala&#x27;],
       ...,
       [b&#x27;mala&#x27;],
       [b&#x27;mala&#x27;],
       [b&#x27;mala&#x27;]], dtype=&#x27;|S4&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>last_rq_date</span></div><div class='xr-var-dims'>(time, record_id)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2018-12-31T22:59:59.971200 ... 2...</div><input id='attrs-c508bebe-5dab-4ace-9a96-2e716d241070' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c508bebe-5dab-4ace-9a96-2e716d241070' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0c41f2f7-1a7a-45ca-9872-4e2be4c28ab5' class='xr-var-data-in' type='checkbox'><label for='data-0c41f2f7-1a7a-45ca-9872-4e2be4c28ab5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>date of last Research Quality sea level value</dd><dt><span>comment :</span></dt><dd>Values in last_rq_date correspond to an identical value in the time vector. Dates less than or equal to last_rq_date for a given station correspond to Research Quality (RQ) data. Dates after last_rq_date correspond to Fast Delivery (FD) data. Missing values indicate no RQ data for a station.</dd></dl></div><div class='xr-var-data'><pre>array([[&#x27;2018-12-31T22:59:59.971200000&#x27;],
       [&#x27;2018-12-31T22:59:59.971200000&#x27;],
       [&#x27;2018-12-31T22:59:59.971200000&#x27;],
       ...,
       [&#x27;2018-12-31T22:59:59.971200000&#x27;],
       [&#x27;2018-12-31T22:59:59.971200000&#x27;],
       [&#x27;2018-12-31T22:59:59.971200000&#x27;]], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>datum</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.162e+03 2.162e+03 ... 2.162e+03</div><input id='attrs-e866128a-d84f-482f-b1a0-8f19d40ba07e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e866128a-d84f-482f-b1a0-8f19d40ba07e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5b84eeda-26fe-4163-8a2e-a0eecdd1ae86' class='xr-var-data-in' type='checkbox'><label for='data-5b84eeda-26fe-4163-8a2e-a0eecdd1ae86' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>mm</dd></dl></div><div class='xr-var-data'><pre>array([2162., 2162., 2162., ..., 2162., 2162., 2162.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>day</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 2 3 4 5 6 ... 314 315 316 317 318</div><input id='attrs-5ea46525-18f5-4ea6-931b-fecb3e3cd8cb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5ea46525-18f5-4ea6-931b-fecb3e3cd8cb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-add48983-5172-42e9-92e8-6ac0548079cc' class='xr-var-data-in' type='checkbox'><label for='data-add48983-5172-42e9-92e8-6ac0548079cc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  1,   2,   3, ..., 316, 317, 318])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>month</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 1 1 1 1 1 ... 11 11 11 11 11 11</div><input id='attrs-8d398631-b5b5-48f9-ba16-4cd3c3fd5f88' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8d398631-b5b5-48f9-ba16-4cd3c3fd5f88' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b95eb3d9-1ada-4e82-93e0-3d15bf29fae9' class='xr-var-data-in' type='checkbox'><label for='data-b95eb3d9-1ada-4e82-93e0-3d15bf29fae9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 1,  1,  1, ..., 11, 11, 11])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>year</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1983 1983 1983 ... 2022 2022 2022</div><input id='attrs-66115296-809e-46e6-9ab3-acf59088ab91' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-66115296-809e-46e6-9ab3-acf59088ab91' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ad4d24ac-21ed-45a6-8c45-db64660235e4' class='xr-var-data-in' type='checkbox'><label for='data-ad4d24ac-21ed-45a6-8c45-db64660235e4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1983, 1983, 1983, ..., 2022, 2022, 2022])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>year_storm</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1983 1983 1983 ... 2022 2022 2022</div><input id='attrs-42dbbc4e-7704-4457-9151-5490c29ae237' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-42dbbc4e-7704-4457-9151-5490c29ae237' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9a5a9834-5c8f-43fa-a2c8-60d5368938bb' class='xr-var-data-in' type='checkbox'><label for='data-9a5a9834-5c8f-43fa-a2c8-60d5368938bb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd></dl></div><div class='xr-var-data'><pre>array([1983, 1983, 1983, ..., 2022, 2022, 2022])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-7f67a9ee-c8ba-4c0e-a048-9bf869ab1d9f' class='xr-section-summary-in' type='checkbox'  ><label for='section-7f67a9ee-c8ba-4c0e-a048-9bf869ab1d9f' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>record_id</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-41046307-8e9e-4038-8b1f-c9843f07e1e0' class='xr-index-data-in' type='checkbox'/><label for='index-41046307-8e9e-4038-8b1f-c9843f07e1e0' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([70], dtype=&#x27;int16&#x27;, name=&#x27;record_id&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-642b534a-8fdf-4c2a-94fa-a444c60b6f1c' class='xr-index-data-in' type='checkbox'/><label for='index-642b534a-8fdf-4c2a-94fa-a444c60b6f1c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;1983-01-01&#x27;, &#x27;1983-01-02&#x27;, &#x27;1983-01-03&#x27;, &#x27;1983-01-04&#x27;,
               &#x27;1983-01-05&#x27;, &#x27;1983-01-06&#x27;, &#x27;1983-01-07&#x27;, &#x27;1983-01-08&#x27;,
               &#x27;1983-01-09&#x27;, &#x27;1983-01-10&#x27;,
               ...
               &#x27;2022-11-05&#x27;, &#x27;2022-11-06&#x27;, &#x27;2022-11-07&#x27;, &#x27;2022-11-08&#x27;,
               &#x27;2022-11-09&#x27;, &#x27;2022-11-10&#x27;, &#x27;2022-11-11&#x27;, &#x27;2022-11-12&#x27;,
               &#x27;2022-11-13&#x27;, &#x27;2022-11-14&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=14563, freq=&#x27;D&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f90cacb5-a5c6-4468-bc41-2cc58ddf5e76' class='xr-section-summary-in' type='checkbox'  ><label for='section-f90cacb5-a5c6-4468-bc41-2cc58ddf5e76' class='xr-section-summary' >Attributes: <span>(11)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>UHSLC Fast Delivery Tide Gauge Data (hourly)</dd><dt><span>ncei_template_version :</span></dt><dd>NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0</dd><dt><span>featureType :</span></dt><dd>timeSeries</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>date_created :</span></dt><dd>2023-12-07T14:34:12Z</dd><dt><span>publisher_name :</span></dt><dd>University of Hawaii Sea Level Center (UHSLC)</dd><dt><span>publisher_email :</span></dt><dd>philiprt@hawaii.edu, markm@soest.hawaii.edu</dd><dt><span>publisher_url :</span></dt><dd>http://uhslc.soest.hawaii.edu</dd><dt><span>summary :</span></dt><dd>The UHSLC assembles and distributes the Fast Delivery (FD) dataset of hourly- and daily-averaged tide gauge water-level observations. Tide gauge operators, or data creators, provide FD data to UHSLC after a level 1 quality assessment (see processing_level attribute). The UHSLC provides an independent quality assessment of the time series and makes FD data available within 4-6 weeks of collection. This is a &quot;fast&quot; turnaround time compared to Research Quality (RQ) data, which are available on an annual cycle after a level 2 quality assessment. RQ data replace FD data in the data stream as the former becomes available. This file contains hybrid time series composed of RQ data when available with FD data appended to the end of each RQ series.</dd><dt><span>processing_level :</span></dt><dd>Fast Delivery (FD) data undergo a level 1 quality assessment (e.g., unit and timing evaluation, outlier detection, combination of multiple channels into a primary channel, etc.). In this file, FD data are appended to Research Quality (RQ) data that have received a level 2 quality assessment (e.g., tide gauge datum evaluation, assessment of level ties to tide gauge benchmarks, comparison with nearby stations, etc.).</dd><dt><span>acknowledgment :</span></dt><dd>The UHSLC Fast Delivery database is supported by the National Oceanic and Atmospheric Administration (NOAA) Office of Climate Observations (OCO).</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a new figure that is 15 x 5</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">SL_daily_max</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">SL_daily_max</span><span class="o">.</span><span class="n">sea_level</span><span class="o">.</span><span class="n">values</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Date (Calendar Year)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sea Level (cm)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Sea Level Daily Maximum Time Series&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Sea Level Daily Maximum Time Series&#39;)
</pre></div>
</div>
<img alt="../_images/346daa2f6411af69dd680805e9b1afea3bf270dfcc9050b700318f8a1cff9127.png" src="../_images/346daa2f6411af69dd680805e9b1afea3bf270dfcc9050b700318f8a1cff9127.png" />
</div>
</div>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a pdf of the data with 95th percentile threshold</span>

<span class="n">sea_level_data_cm</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;sea_level&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">/</span><span class="mi">10</span> <span class="c1"># convert to cm</span>
<span class="c1">#remove nans</span>
<span class="n">sea_level_data_cm</span> <span class="o">=</span> <span class="n">sea_level_data_cm</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">sea_level_data_cm</span><span class="p">)]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">sea_level_data_cm</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sea Level Data&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Threshold: </span><span class="si">{:.4f}</span><span class="s1"> cm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">threshold</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sea Level (cm)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Probability Density&#39;</span><span class="p">)</span>
<span class="c1"># make the title two lines</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Sea Level Histogram</span><span class="se">\n</span><span class="s1">with 95th Percentile Threshold&#39;</span><span class="p">)</span>

<span class="c1"># add label to dashed line</span>
<span class="c1"># get value of middle of y-axis for label placement</span>
<span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
<span class="n">yrange</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>
<span class="n">y_middle</span> <span class="o">=</span> <span class="n">ymin</span> <span class="o">+</span> <span class="n">yrange</span><span class="o">/</span><span class="mi">2</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">y_middle</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1"> cm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">threshold</span><span class="p">),</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;histogram_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/2c43589e547b8c820dc9de85ac47bdb21d21de99b36adf686e75b3572c1e6c37.png" src="../_images/2c43589e547b8c820dc9de85ac47bdb21d21de99b36adf686e75b3572c1e6c37.png" />
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find all days where sea level exceeds the threshold</span>
<span class="n">flood_day</span> <span class="o">=</span> <span class="p">(</span><span class="n">SL_daily_max</span><span class="o">.</span><span class="n">sea_level</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">)</span>

<span class="n">SL_daily_max</span><span class="p">[</span><span class="s1">&#39;flood_day&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flood_day</span>

<span class="c1"># Filtering the dataset for flood hours and selecting relevant variables</span>
<span class="n">flood_days_data</span> <span class="o">=</span> <span class="n">SL_daily_max</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SL_daily_max</span><span class="o">.</span><span class="n">flood_day</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)[[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]]</span>

<span class="c1"># Converting the dataset to a DataFrame</span>
<span class="n">flood_days_df</span> <span class="o">=</span> <span class="n">flood_days_data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># Grouping by &#39;year_storm&#39; and counting the number of flood days</span>
<span class="n">flood_days_per_year</span> <span class="o">=</span> <span class="n">flood_days_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year_storm&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;flood_days_count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find all hours where sea level exceeds the threshold</span>
<span class="n">flood_hour</span> <span class="o">=</span> <span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">sea_level</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">)</span>

<span class="n">hourly_data</span><span class="p">[</span><span class="s1">&#39;flood_hour&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flood_hour</span>

<span class="c1"># Filtering the dataset for flood hours and selecting relevant variables</span>
<span class="n">flood_hours_data</span> <span class="o">=</span> <span class="n">hourly_data</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">hourly_data</span><span class="o">.</span><span class="n">flood_hour</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)[[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]]</span>

<span class="c1"># Converting the dataset to a DataFrame</span>
<span class="n">flood_hours_df</span> <span class="o">=</span> <span class="n">flood_hours_data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># Grouping by &#39;year_storm&#39; and counting the number of flood hours</span>
<span class="n">flood_hours_per_year</span> <span class="o">=</span> <span class="n">flood_hours_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year_storm&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;flood_hours_count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="plot-flood-frequency-counts">
<h3><span class="section-number">2.3.1. </span>Plot Flood Frequency Counts<a class="headerlink" href="#plot-flood-frequency-counts" title="Permalink to this heading">#</a></h3>
<p>The flood frequency counts are defined as the number of time periods that exceed a given threshold within a year. This plot follows <span id="id2">Sweet <em>et al.</em> [<a class="reference internal" href="#id5" title="William Sweet, Joseph Park, John Marra, Chris Zervas, and Stephen Gill. Sea level rise and nuisance flood frequency changes around the United States. Technical Report, NOAA, 2014. URL: https://repository.library.noaa.gov/view/noaa/30823.">SPM+14</a>]</span>.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adjusting the heatmap palette to improve readability</span>
<span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;flood_days_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;flood_days_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;flood_days_count&#39;</span><span class="p">]]</span>

<span class="c1"># Plotting with the adjusted settings</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year_storm&#39;</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;flood_days_count&#39;</span><span class="p">,</span> 
    <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;year_storm&#39;</span><span class="p">,</span> 
    <span class="n">data</span><span class="o">=</span><span class="n">flood_days_per_year</span><span class="p">,</span> 
    <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
    <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">flood_days_per_year</span><span class="p">),</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Setting x-ticks to show every 5th year</span>
<span class="n">year_ticks</span> <span class="o">=</span> <span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">][::</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># Selecting every 5th year for the x-axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">year_ticks</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

<span class="c1"># Adding a light gray grid</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Storm Year&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of Flood Days&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Number of Flood Days Per Year (Adjusted Heatmap Coloring)&#39;</span><span class="p">)</span>
             
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;threshold_counts_days_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># save the figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_FloodFrequency_threshold_counts_days.png&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/40c0ad9ce275e1931e93aef470ece3518634e90e907067c2e4f9fa2fb14ad025.png" src="../_images/40c0ad9ce275e1931e93aef470ece3518634e90e907067c2e4f9fa2fb14ad025.png" />
</div>
</details>
</div>
<figure class="align-default" id="fig-threshold-counts">
<img alt="../_images/40c0ad9ce275e1931e93aef470ece3518634e90e907067c2e4f9fa2fb14ad025.png" src="../_images/40c0ad9ce275e1931e93aef470ece3518634e90e907067c2e4f9fa2fb14ad025.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.3 </span><span class="caption-text">Flood frequency counts above a threshold of <span class="pasted-text">30.000</span> cm per year at <span class="pasted-text">Malakal</span>,<span class="pasted-text">Palau</span> tide gauge from <span class="pasted-text">1983-01-01</span> to <span class="pasted-text">2022-11-14</span>.</span><a class="headerlink" href="#fig-threshold-counts" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="plot-flood-duration">
<h3><span class="section-number">2.3.2. </span>Plot Flood Duration<a class="headerlink" href="#plot-flood-duration" title="Permalink to this heading">#</a></h3>
<p>This next plot examines the average duration of flooding events as defined by the threshold.
I have a few issues with this plot being “duration,” as it’s just counts of hours above the threshold. These hours need not be continuous…which to me is what duration is all about. Anyway, we carry on.</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>Also I’m very aware that this colorbar is polar opposite of what it normally should be. Not going to bother with it for now.</p>
</aside>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is the same as the previous cell, but with &#39;flood_hours_count&#39; instead of &#39;flood_days_count&#39; and &#39;flood_hours_per_year&#39; instead of &#39;flood_days_per_year&#39;. This is bad coding. I should have made a function to do this.  </span>
<span class="c1"># But there are bigger fish to fry right now.</span>


<span class="c1"># Adjusting the heatmap palette to improve readability</span>
<span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;flood_hours_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;flood_hours_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;flood_hours_count&#39;</span><span class="p">]]</span>

<span class="c1"># Plotting with the adjusted settings</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year_storm&#39;</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;flood_hours_count&#39;</span><span class="p">,</span> 
    <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;year_storm&#39;</span><span class="p">,</span> 
    <span class="n">data</span><span class="o">=</span><span class="n">flood_hours_per_year</span><span class="p">,</span> 
    <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
    <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">flood_hours_per_year</span><span class="p">),</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Setting x-ticks to show every 5th year</span>
<span class="n">year_ticks</span> <span class="o">=</span> <span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">][::</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># Selecting every 5th year for the x-axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">year_ticks</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

<span class="c1"># Adding a light gray grid</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgray&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Storm Year&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of Flood Hours&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Number of Flood Hours Per Year (Adjusted Heatmap Coloring)&#39;</span><span class="p">)</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;duration_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/1c236b6c0fa7a0a1c119379b8ea359c562002554d7564651363ffa4850162594.png" src="../_images/1c236b6c0fa7a0a1c119379b8ea359c562002554d7564651363ffa4850162594.png" />
</div>
</details>
</div>
<figure class="align-default" id="fig-duration">
<img alt="../_images/1c236b6c0fa7a0a1c119379b8ea359c562002554d7564651363ffa4850162594.png" src="../_images/1c236b6c0fa7a0a1c119379b8ea359c562002554d7564651363ffa4850162594.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.4 </span><span class="caption-text">Average flood duration in hours above a threshold of <span class="pasted-text">30.000</span> cm per year at <span class="pasted-text">Malakal</span>,<span class="pasted-text">Palau</span> tide gauge from <span class="pasted-text">1983-01-01</span> to <span class="pasted-text">2022-11-14</span>.</span><a class="headerlink" href="#fig-duration" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="calculate-the-percent-change-over-time">
<h2><span class="section-number">2.4. </span>Calculate the percent change over time<a class="headerlink" href="#calculate-the-percent-change-over-time" title="Permalink to this heading">#</a></h2>
<p>Next we’ll calculate the percent change over the POR at the tide station/s, for both Frequency and Duration.</p>
<p>The next code cell fits a trend line to the flood days per year data and calculates the trend line.
It then plots the data and the trend line in a figure, and calculates the percent change in flood days per year using the trend line. The same process is repeated for flood hours per year.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">],</span> <span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;flood_days_count&#39;</span><span class="p">])</span>
<span class="n">trend</span> <span class="o">=</span> <span class="n">intercept</span> <span class="o">+</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">],</span> <span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;flood_days_count&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">flood_days_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">],</span> <span class="n">trend</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trend&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Flood Days&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;trend_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">percent_change_days</span> <span class="o">=</span> <span class="p">(</span><span class="n">trend</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">trend</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">trend</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;percent_change_days&quot;</span><span class="p">,</span> <span class="n">percent_change_days</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">percent_change_days</span>

<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">],</span> <span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;flood_hours_count&#39;</span><span class="p">])</span>
<span class="n">trend</span> <span class="o">=</span> <span class="n">intercept</span> <span class="o">+</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">]</span>

<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">],</span> <span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;flood_hours_count&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">flood_hours_per_year</span><span class="p">[</span><span class="s1">&#39;year_storm&#39;</span><span class="p">],</span> <span class="n">trend</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trend&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Storm Year&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Flood Hours&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;trend_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">percent_change_hours</span> <span class="o">=</span>  <span class="p">(</span><span class="n">trend</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span><span class="o">-</span><span class="n">trend</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">trend</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span>
<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;percent_change_hours&quot;</span><span class="p">,</span> <span class="n">percent_change_hours</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">percent_change_hours</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>39    113.806306
Name: year_storm, dtype: float64
</pre></div>
</div>
<img alt="../_images/47595c0ed9db42210b81c4937d8ad5df85b9bfa262d36b27542979e1b4c0e046.png" src="../_images/47595c0ed9db42210b81c4937d8ad5df85b9bfa262d36b27542979e1b4c0e046.png" />
</div>
</div>
<p>Now we’ll generate a table with this information, which will be saved as a .csv in the output directory specified at the top of this notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a dataframe with the percent change in flood days and hours per year, with given threshold</span>
<span class="n">percent_change_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;percent_change_days&#39;</span><span class="p">:</span> <span class="n">percent_change_days</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;percent_change_hours&#39;</span><span class="p">:</span> <span class="n">percent_change_hours</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;threshold&#39;</span><span class="p">:</span> <span class="n">threshold</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># add the station name and country</span>
<span class="n">percent_change_df</span><span class="p">[</span><span class="s1">&#39;station&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">station</span>
<span class="n">percent_change_df</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">country</span>

<span class="c1"># reorder the columns</span>
<span class="n">percent_change_df</span> <span class="o">=</span> <span class="n">percent_change_df</span><span class="p">[[</span><span class="s1">&#39;station&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;threshold&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_change_days&#39;</span><span class="p">,</span> <span class="s1">&#39;percent_change_hours&#39;</span><span class="p">]]</span>

<span class="c1"># Define your attributes</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;station&#39;</span><span class="p">:</span> <span class="s1">&#39;Station name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;Country name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;threshold&#39;</span><span class="p">:</span> <span class="s1">&#39;Threshold in cm above MHHW&#39;</span><span class="p">,</span>
    <span class="s1">&#39;percent_change_days&#39;</span><span class="p">:</span> <span class="s1">&#39;Percent change in flood days per year&#39;</span><span class="p">,</span>
    <span class="s1">&#39;percent_change_hours&#39;</span><span class="p">:</span> <span class="s1">&#39;Percent change in flood hours per year&#39;</span>
<span class="p">}</span>

<span class="c1"># Open the file in write mode</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_FloodFrequency_percent_change.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># Write the attributes as comments</span>
    <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;# </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># Write the DataFrame to the file</span>
    <span class="n">percent_change_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">percent_change_df</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>station</th>
      <th>country</th>
      <th>threshold</th>
      <th>percent_change_days</th>
      <th>percent_change_hours</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Malakal</td>
      <td>Palau</td>
      <td>30</td>
      <td>61.836836</td>
      <td>113.806306</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="create-a-map">
<h2><span class="section-number">2.5. </span>Create a map<a class="headerlink" href="#create-a-map" title="Permalink to this heading">#</a></h2>
<p>In this next section we’ll create a map with an icon depicting the percent change over the Period of Record at the tide station/s, for both Frequency and Duration.</p>
<p>The following cell defines a function that creates a “zebra stripe” pattern for the map borders.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_zebra_frame</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">segment_length</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()):</span>
    <span class="c1"># Get the current extent of the map</span>
    <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">bot</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_extent</span><span class="p">(</span><span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>

    <span class="c1"># Calculate the nearest 0 or 0.5 degree mark within the current extent</span>
    <span class="n">left_start</span> <span class="o">=</span> <span class="n">left</span> <span class="o">-</span> <span class="n">left</span> <span class="o">%</span> <span class="n">segment_length</span>
    <span class="n">bot_start</span> <span class="o">=</span> <span class="n">bot</span> <span class="o">-</span> <span class="n">bot</span> <span class="o">%</span> <span class="n">segment_length</span>

    <span class="c1"># Adjust the start if it does not align with the desired segment start</span>
    <span class="k">if</span> <span class="n">left</span> <span class="o">%</span> <span class="n">segment_length</span> <span class="o">&gt;=</span> <span class="n">segment_length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">left_start</span> <span class="o">+=</span> <span class="n">segment_length</span>
    <span class="k">if</span> <span class="n">bot</span> <span class="o">%</span> <span class="n">segment_length</span> <span class="o">&gt;=</span> <span class="n">segment_length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">bot_start</span> <span class="o">+=</span> <span class="n">segment_length</span>

    <span class="c1"># Extend the frame slightly beyond the map extent to ensure full coverage</span>
    <span class="n">right_end</span> <span class="o">=</span> <span class="n">right</span> <span class="o">+</span> <span class="p">(</span><span class="n">segment_length</span> <span class="o">-</span> <span class="n">right</span> <span class="o">%</span> <span class="n">segment_length</span><span class="p">)</span>
    <span class="n">top_end</span> <span class="o">=</span> <span class="n">top</span> <span class="o">+</span> <span class="p">(</span><span class="n">segment_length</span> <span class="o">-</span> <span class="n">top</span> <span class="o">%</span> <span class="n">segment_length</span><span class="p">)</span>

    <span class="c1"># Calculate the number of segments needed for each side</span>
    <span class="n">num_segments_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">right_end</span> <span class="o">-</span> <span class="n">left_start</span><span class="p">)</span> <span class="o">/</span> <span class="n">segment_length</span><span class="p">))</span>
    <span class="n">num_segments_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">top_end</span> <span class="o">-</span> <span class="n">bot_start</span><span class="p">)</span> <span class="o">/</span> <span class="n">segment_length</span><span class="p">))</span>

    <span class="c1"># Draw horizontal stripes at the top and bottom</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_segments_x</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span> <span class="k">if</span> <span class="p">(</span><span class="n">left_start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;white&#39;</span>
        <span class="n">start_x</span> <span class="o">=</span> <span class="n">left_start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">segment_length</span>
        <span class="n">end_x</span> <span class="o">=</span> <span class="n">start_x</span> <span class="o">+</span> <span class="n">segment_length</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">hlines</span><span class="p">([</span><span class="n">bot</span><span class="p">,</span> <span class="n">top</span><span class="p">],</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">end_x</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>

    <span class="c1"># Draw vertical stripes on the left and right</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_segments_y</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span> <span class="k">if</span> <span class="p">(</span><span class="n">bot_start</span> <span class="o">+</span> <span class="n">j</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">segment_length</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;white&#39;</span>
        <span class="n">start_y</span> <span class="o">=</span> <span class="n">bot_start</span> <span class="o">+</span> <span class="n">j</span> <span class="o">*</span> <span class="n">segment_length</span>
        <span class="n">end_y</span> <span class="o">=</span> <span class="n">start_y</span> <span class="o">+</span> <span class="n">segment_length</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">],</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">end_y</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>The following cell defines a function to implement the zebra stripes on a given axis.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_zebra_frame</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">segment_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot a zebra frame on the given axes.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - ax: The axes object on which to plot the zebra frame.</span>
<span class="sd">    - lw: The line width of the zebra frame. Default is 5.</span>
<span class="sd">    - segment_length: The length of each segment in the zebra frame. Default is 2.</span>
<span class="sd">    - crs: The coordinate reference system of the axes. Default is ccrs.PlateCarree().</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Call the function to add the zebra frame</span>
    <span class="n">add_zebra_frame</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span> <span class="n">segment_length</span><span class="o">=</span><span class="n">segment_length</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">)</span>
    <span class="c1"># add map grid</span>
    <span class="n">gl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
                      <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">xlocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">(),</span><span class="n">ylocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">())</span>
    <span class="c1">#remove labels from top and right axes</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>The following cell defines a function to add arrow icons denoting percent change.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a function for adding the arrows</span>
<span class="k">def</span> <span class="nf">add_arrow</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="n">percent_change</span><span class="p">,</span><span class="n">crs</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
<span class="c1"># make colormap of percent change</span>
    <span class="n">adjusted_heatmap_palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;YlOrRd&quot;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Prepare data for quiver plot</span>
    <span class="n">U</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span>  <span class="c1"># Dummy U component (no horizontal movement)</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">percent_change</span><span class="o">/</span><span class="mi">100</span>   <span class="c1"># V component scaled by percent change</span>
    <span class="n">arrow_scale</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># Adjust as necessary for arrow size</span>
    <span class="n">arrow_width</span> <span class="o">=</span> <span class="mf">0.01</span>  <span class="c1"># Adjust for desired arrow thickness</span>

    <span class="c1"># Quiver plot</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">arrow_scale</span><span class="p">,</span>
              <span class="n">color</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">percent_change</span><span class="o">.</span><span class="n">values</span> <span class="o">/</span> <span class="n">vmax</span><span class="p">),</span> 
              <span class="n">cmap</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="n">arrow_width</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>And here is our final plotting code:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xlims</span> <span class="o">=</span> <span class="p">[</span><span class="mi">128</span><span class="p">,</span> <span class="mi">138</span><span class="p">]</span>
<span class="n">ylims</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
<span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">100</span>

<span class="c1"># fig, ax, crs,cmap = plot_map(vmin,vmax,xlims,ylims)</span>
<span class="n">crs</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span> <span class="n">crs</span><span class="p">})</span>


<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axs</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xlims</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ylims</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>

    <span class="c1"># Fill in water</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightgrey&#39;</span><span class="p">)</span>
    <span class="c1"># add a) b) labels</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="nb">chr</span><span class="p">(</span><span class="mi">97</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span> 
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightblue&#39;</span><span class="p">)</span>

    <span class="c1"># add map grid</span>
    <span class="n">gl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
                  <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">xlocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">(),</span><span class="n">ylocs</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">())</span>
    
    <span class="c1">#remove labels from top and right axes</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">ax</span> <span class="o">==</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">gl</span><span class="o">.</span><span class="n">left_labels</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">add_arrow</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">percent_change_days</span><span class="p">,</span> <span class="n">crs</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
<span class="n">add_arrow</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">percent_change_hours</span><span class="p">,</span> <span class="n">crs</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>

<span class="c1"># Plot zebra frame</span>
<span class="c1"># plot_zebra_frame(axs[0], lw=5, segment_length=2, crs=crs)</span>
<span class="c1"># plot_zebra_frame(axs[1], lw=5, segment_length=2, crs=crs)</span>

<span class="c1"># Add text for percent change</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">])):</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percent_change_days</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">percent_change_days</span><span class="o">.</span><span class="n">values</span> <span class="o">/</span> <span class="n">vmax</span><span class="p">))</span>
    <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">rsl</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percent_change_hours</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">adjusted_heatmap_palette</span><span class="p">(</span><span class="n">percent_change_hours</span><span class="o">.</span><span class="n">values</span> <span class="o">/</span> <span class="n">vmax</span><span class="p">))</span>


<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;mag_fig&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Save the figure</span>
<span class="n">output_file_path</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s1">&#39;SL_FloodFrequency_map.png&#39;</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_file_path</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<img alt="../_images/87a33c406b547903a5b20fcef3f11ef7dcc17c7e062a162055ebaa036e50cbed.png" src="../_images/87a33c406b547903a5b20fcef3f11ef7dcc17c7e062a162055ebaa036e50cbed.png" />
</div>
</details>
</div>
<figure class="align-default" id="mag-fig">
<img alt="../_images/87a33c406b547903a5b20fcef3f11ef7dcc17c7e062a162055ebaa036e50cbed.png" src="../_images/87a33c406b547903a5b20fcef3f11ef7dcc17c7e062a162055ebaa036e50cbed.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.5 </span><span class="caption-text">Map of the percent change in average flood (a) days and (b) hours per year above a threshold of <span class="pasted-text">30.0</span> cm above <span class="pasted-text">MHHW</span> per year at <span class="pasted-text">Malakal</span>,<span class="pasted-text">Palau</span> tide gauge from <span class="pasted-text">1983-01-01</span> to <span class="pasted-text">2022-11-14</span></span><a class="headerlink" href="#mag-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="citations">
<h2><span class="section-number">2.6. </span>Citations<a class="headerlink" href="#citations" title="Permalink to this heading">#</a></h2>
<div class="docutils container" id="id3">
<dl class="citation">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id2">SPM+14</a></span></dt>
<dd><p>William Sweet, Joseph Park, John Marra, Chris Zervas, and Stephen Gill. Sea level rise and nuisance flood frequency changes around the United States. Technical Report, NOAA, 2014. URL: <a class="reference external" href="https://repository.library.noaa.gov/view/noaa/30823">https://repository.library.noaa.gov/view/noaa/30823</a>.</p>
</dd>
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id1">TWM+19</a></span></dt>
<dd><p>Philip R. Thompson, Matthew J. Widlansky, Mark A. Merrifield, Janet M. Becker, and John J. Marra. A Statistical Model for Frequency of Coastal Flooding in Honolulu, Hawaii, During the 21st Century. <em>Journal of Geophysical Research: Oceans</em>, 124(4):2787–2802, 2019. URL: <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1029/2018JC014741">https://onlinelibrary.wiley.com/doi/abs/10.1029/2018JC014741</a>, <a class="reference external" href="https://doi.org/10.1029/2018JC014741">doi:10.1029/2018JC014741</a>.</p>
</dd>
</dl>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "jwfiedler/SL_Indicators",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./SL_indicators_NBs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="SL_magnitude.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Regional and Local Sea Level Change</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">2.1. Setup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-necessary-libraries">2.1.1. Import necessary libraries.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieve-the-tide-station-s-data-set-s">2.2. Retrieve the Tide Station(s) Data Set(s)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-the-datum-to-mhhw">2.2.1. Set the Datum to MHHW</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assess-station-data-quality-for-the-por-1983-2022">2.2.2. Assess Station Data Quality for the POR (1983-2022)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#identify-epoch-for-the-flood-frequency-analysis">2.2.2.1. Identify epoch for the flood frequency analysis</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adjust-the-data-from-calendar-year-to-storm-year">2.2.3. Adjust the data from calendar year to storm year</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-a-threshold">2.2.4. Assign a Threshold</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-and-plot-flood-frequency">2.3. Calculate and Plot Flood Frequency</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-frequency-counts">2.3.1. Plot Flood Frequency Counts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-flood-duration">2.3.2. Plot Flood Duration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-the-percent-change-over-time">2.4. Calculate the percent change over time</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-map">2.5. Create a map</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#citations">2.6. Citations</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Playground Coordinator
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>